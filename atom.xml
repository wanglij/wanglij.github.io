<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Lijun's Blog]]></title>
  <link href="http://wanglij.github.io/atom.xml" rel="self"/>
  <link href="http://wanglij.github.io/"/>
  <updated>2016-12-16T21:21:04+00:00</updated>
  <id>http://wanglij.github.io/</id>
  <author>
    <name><![CDATA[Lijun Wang]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Cmake: Error While Loading Shared Libraries: libjsoncpp.so.11: Cannot Open Shared Object File: No Such File or Directory]]></title>
    <link href="http://wanglij.github.io/blog/2016/12/16/cmake-error-while-loading-shared-libraries-libjsoncpp-dot-so-dot-11-cannot-open-shared-object-file-no-such-file-or-directory/"/>
    <updated>2016-12-16T20:35:43+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/12/16/cmake-error-while-loading-shared-libraries-libjsoncpp-dot-so-dot-11-cannot-open-shared-object-file-no-such-file-or-directory</id>
    <content type="html"><![CDATA[<p>I worked on C++ program supposed to be run in QNX, but to facility debugging, I sometimes will build the source codes in my Arch Linux virtual machine.
Here are the command lines of doing this</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mkdir ~/&lt;path-to-project&gt;/PROJECT_NAME_linux
</span><span class='line'>$ cd  ~/&lt;path-to-project&gt;/PROJECT_NAME_linux
</span><span class='line'>$ cmake -D PLATFORM=LINUX ~/&lt;path-to-project&gt;/PROJECT_NAME/&lt;folder-containing-CMakeLists.txt&gt;</span></code></pre></td></tr></table></div></figure>


<p>But for some unknown reason, I can&rsquo;t run cmake in my Arch Linux any more recently. It gives the following error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cmake: error while loading shared libraries: libjsoncpp.so.11: cannot open shared object file: No such file or directory</span></code></pre></td></tr></table></div></figure>


<p>This was solved by installing jsoncpp.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='s'><span class='line'><span class="o">$</span> sudo pacman <span class="o">-</span>S jsoncpp
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Is Constructor Reenterable?]]></title>
    <link href="http://wanglij.github.io/blog/2016/12/16/is-constructor-reenterable/"/>
    <updated>2016-12-16T19:42:36+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/12/16/is-constructor-reenterable</id>
    <content type="html"><![CDATA[<h3>Background</h3>

<p>While I was working on an issue in my work, I noticed another weird unexpected issue.
The program is multi-threaded program written in C/C++, which runs in QNX environment.
There is a singleton class that creates a new thread at the end of its constructor method.
Since it is a singleton, so we assume that there should be one and only one thread created,
but as a matter fact, most of the time there were two of them running in the process.
Eventually, I found that the static function getting the instance of the singleton, get_instance(), was called again within the function executed by the new thread.
At that point, the parent thread may not return from the constructor yet, so by calling get_instance() in the new thread the constructor method may be executed the second time, and consequently created another new thread.</p>

<h3>Example</h3>

<p>Based on what I learned, I wrote a simple example program to reproduce and study this issue only.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="cp">#include &lt;unistd.h&gt;</span>
</span><span class='line'><span class="cp">#include &lt;pthread.h&gt;</span>
</span><span class='line'><span class="cp">#include &lt;iostream&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">ACls</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>    <span class="k">static</span> <span class="n">ACls</span><span class="o">&amp;</span> <span class="n">get_instance</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">__PRETTY_FUNCTION__</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">pthread_self</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>        <span class="k">static</span> <span class="n">ACls</span> <span class="n">instance</span><span class="p">;</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">instance</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="k">private</span><span class="o">:</span>
</span><span class='line'>    <span class="n">ACls</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tid</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</span><span class='line'>        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">__PRETTY_FUNCTION__</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; - tid: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">tid</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'><span class="c1">//        sleep(1);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">~</span><span class="n">ACls</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">arg</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">__PRETTY_FUNCTION__</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">pthread_self</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">ACls</span><span class="o">&amp;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">ACls</span><span class="o">::</span><span class="n">get_instance</span><span class="p">();</span>
</span><span class='line'>        <span class="n">obj</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="n">pthread_self</span><span class="p">();</span>
</span><span class='line'>        <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">__PRETTY_FUNCTION__</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; - i: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">obj</span><span class="p">.</span><span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span><span class='line'>            <span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">pthread_t</span>   <span class="n">tid</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">ACls</span><span class="o">::</span><span class="n">get_instance</span><span class="p">().</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>    <span class="n">pause</span><span class="p">();</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Results</h3>

<p>I compile it for both Linux and QNX platform. Apparently, it gives different results on different platforms.</p>

<h4>QNX:</h4>

<p>The problem was duplicated on QNX platform.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="cp"># ./unit-tests</span>
</span><span class='line'><span class="k">static</span> <span class="n">ACls</span><span class="o">&amp;</span> <span class="n">ACls</span><span class="o">::</span><span class="n">get_instance</span><span class="p">()</span> <span class="mi">1</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="mi">2</span>
</span><span class='line'><span class="n">ACls</span><span class="o">::</span><span class="n">ACls</span><span class="p">()</span> <span class="o">-</span> <span class="nl">tid</span><span class="p">:</span> <span class="mi">2</span>
</span><span class='line'><span class="k">static</span> <span class="n">ACls</span><span class="o">&amp;</span> <span class="n">ACls</span><span class="o">::</span><span class="n">get_instance</span><span class="p">()</span> <span class="mi">2</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="mi">3</span>
</span><span class='line'><span class="n">ACls</span><span class="o">::</span><span class="n">ACls</span><span class="p">()</span> <span class="o">-</span> <span class="nl">tid</span><span class="p">:</span> <span class="mi">3</span>
</span><span class='line'><span class="k">static</span> <span class="n">ACls</span><span class="o">&amp;</span> <span class="n">ACls</span><span class="o">::</span><span class="n">get_instance</span><span class="p">()</span> <span class="mi">3</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">-</span> <span class="nl">i</span><span class="p">:</span> <span class="mi">3</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">-</span> <span class="nl">i</span><span class="p">:</span> <span class="mi">2</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">-</span> <span class="nl">i</span><span class="p">:</span> <span class="mi">2</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">-</span> <span class="nl">i</span><span class="p">:</span> <span class="mi">2</span>
</span><span class='line'>
</span><span class='line'><span class="cp"># pidin | grep unit</span>
</span><span class='line'>
</span><span class='line'><span class="n">couldn</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">fill_info</span>
</span><span class='line'>  <span class="mi">872490</span>   <span class="mi">1</span> <span class="p">.</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span>        <span class="mi">10</span><span class="n">r</span> <span class="n">SIGWAITINFO</span>
</span><span class='line'>  <span class="mi">872490</span>   <span class="mi">2</span> <span class="p">.</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span>        <span class="mi">10</span><span class="n">r</span> <span class="n">NANOSLEEP</span>
</span><span class='line'>  <span class="mi">872490</span>   <span class="mi">3</span> <span class="p">.</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span>        <span class="mi">10</span><span class="n">r</span> <span class="n">NANOSLEEP</span>
</span><span class='line'><span class="cp"># gdb unit-tests</span>
</span><span class='line'><span class="n">GNU</span> <span class="n">gdb</span> <span class="mf">5.2.1</span><span class="n">qnx</span><span class="o">-</span><span class="n">nto</span>
</span><span class='line'><span class="n">Copyright</span> <span class="mi">2002</span> <span class="n">Free</span> <span class="n">Software</span> <span class="n">Foundation</span><span class="p">,</span> <span class="n">Inc</span><span class="p">.</span>
</span><span class='line'><span class="n">GDB</span> <span class="n">is</span> <span class="n">free</span> <span class="n">software</span><span class="p">,</span> <span class="n">covered</span> <span class="n">by</span> <span class="n">the</span> <span class="n">GNU</span> <span class="n">General</span> <span class="n">Public</span> <span class="n">License</span><span class="p">,</span> <span class="n">and</span> <span class="n">you</span> <span class="n">are</span>
</span><span class='line'><span class="n">welcome</span> <span class="n">to</span> <span class="n">change</span> <span class="n">it</span> <span class="n">and</span><span class="o">/</span><span class="n">or</span> <span class="n">distribute</span> <span class="n">copies</span> <span class="n">of</span> <span class="n">it</span> <span class="n">under</span> <span class="n">certain</span> <span class="n">conditions</span><span class="p">.</span>
</span><span class='line'><span class="n">Type</span> <span class="s">&quot;show copying&quot;</span> <span class="n">to</span> <span class="n">see</span> <span class="n">the</span> <span class="n">conditions</span><span class="p">.</span>
</span><span class='line'><span class="n">There</span> <span class="n">is</span> <span class="n">absolutely</span> <span class="n">no</span> <span class="n">warranty</span> <span class="k">for</span> <span class="n">GDB</span><span class="p">.</span>  <span class="n">Type</span> <span class="s">&quot;show warranty&quot;</span> <span class="k">for</span> <span class="n">details</span><span class="p">.</span>
</span><span class='line'><span class="n">This</span> <span class="n">GDB</span> <span class="n">was</span> <span class="n">configured</span> <span class="n">as</span> <span class="s">&quot;ntox86&quot;</span><span class="p">...</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">872490</span>
</span><span class='line'><span class="n">Attaching</span> <span class="n">to</span> <span class="n">program</span> <span class="err">`</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">process</span> <span class="mi">872490</span>
</span><span class='line'><span class="n">Reading</span> <span class="n">symbols</span> <span class="n">from</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcpp</span><span class="p">.</span><span class="n">so</span><span class="mf">.4</span><span class="p">...</span><span class="n">done</span><span class="p">.</span>
</span><span class='line'><span class="n">Loaded</span> <span class="n">symbols</span> <span class="k">for</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcpp</span><span class="p">.</span><span class="n">so</span><span class="mf">.4</span>
</span><span class='line'><span class="n">Reading</span> <span class="n">symbols</span> <span class="n">from</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.2</span><span class="p">...</span><span class="n">done</span><span class="p">.</span>
</span><span class='line'><span class="n">Loaded</span> <span class="n">symbols</span> <span class="k">for</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.2</span>
</span><span class='line'><span class="nl">warning</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">dynamic</span> <span class="n">linker</span> <span class="n">breakpoint</span> <span class="n">function</span><span class="p">.</span>
</span><span class='line'><span class="n">GDB</span> <span class="n">will</span> <span class="n">be</span> <span class="n">unable</span> <span class="n">to</span> <span class="n">debug</span> <span class="n">shared</span> <span class="n">library</span> <span class="n">initializers</span>
</span><span class='line'><span class="n">and</span> <span class="n">track</span> <span class="n">explicitly</span> <span class="n">loaded</span> <span class="n">dynamic</span> <span class="n">code</span><span class="p">.</span>
</span><span class='line'><span class="p">[</span><span class="n">Switching</span> <span class="n">to</span> <span class="n">process</span> <span class="mi">872490</span><span class="p">]</span>
</span><span class='line'><span class="mh">0xb032e985</span> <span class="n">in</span> <span class="n">SignalWaitinfo</span> <span class="p">()</span> <span class="n">from</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.2</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">info</span> <span class="kr">thread</span>
</span><span class='line'>  <span class="mi">3</span> <span class="n">process</span> <span class="mi">872490</span>  <span class="mh">0xb032f36d</span> <span class="n">in</span> <span class="n">TimerTimeout</span> <span class="p">()</span> <span class="n">from</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.2</span>
</span><span class='line'>  <span class="mi">2</span> <span class="n">process</span> <span class="mi">872490</span>  <span class="mh">0xb032f36d</span> <span class="n">in</span> <span class="n">TimerTimeout</span> <span class="p">()</span> <span class="n">from</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.2</span>
</span><span class='line'><span class="o">*</span> <span class="mi">1</span> <span class="n">process</span> <span class="mi">872490</span>  <span class="mh">0xb032e985</span> <span class="n">in</span> <span class="n">SignalWaitinfo</span> <span class="p">()</span> <span class="n">from</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.2</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">bt</span>
</span><span class='line'><span class="cp">#0  0xb032e985 in SignalWaitinfo () from /lib/libc.so.2</span>
</span><span class='line'><span class="cp">#1  0xb031733b in pause () from /lib/libc.so.2</span>
</span><span class='line'><span class="cp">#2  0x0804a929 in main () at C:/p4/LEADER_EM_DEV/unit-tests/src/main.cpp:53</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="kr">thread</span> <span class="mi">2</span>
</span><span class='line'><span class="p">[</span><span class="n">Switching</span> <span class="n">to</span> <span class="kr">thread</span> <span class="mi">2</span> <span class="p">(</span><span class="n">process</span> <span class="mi">872490</span><span class="p">)]</span><span class="err">#</span><span class="mi">0</span>  <span class="mh">0xb032f36d</span> <span class="n">in</span> <span class="n">TimerTimeout</span> <span class="p">()</span>
</span><span class='line'>   <span class="n">from</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.2</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">bt</span>
</span><span class='line'><span class="cp">#0  0xb032f36d in TimerTimeout () from /lib/libc.so.2</span>
</span><span class='line'><span class="cp">#1  0xb0317ac4 in sleep () from /lib/libc.so.2</span>
</span><span class='line'><span class="cp">#2  0x0804ba79 in ACls::func(void*) (arg=0x0)</span>
</span><span class='line'>    <span class="n">at</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">p4</span><span class="o">/</span><span class="n">LEADER_EM_DEV</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="nl">cpp</span><span class="p">:</span><span class="mi">38</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="kr">thread</span> <span class="mi">3</span>
</span><span class='line'><span class="p">[</span><span class="n">Switching</span> <span class="n">to</span> <span class="kr">thread</span> <span class="mi">3</span> <span class="p">(</span><span class="n">process</span> <span class="mi">872490</span><span class="p">)]</span><span class="err">#</span><span class="mi">0</span>  <span class="mh">0xb032f36d</span> <span class="n">in</span> <span class="n">TimerTimeout</span> <span class="p">()</span>
</span><span class='line'>   <span class="n">from</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.2</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">bt</span>
</span><span class='line'><span class="cp">#0  0xb032f36d in TimerTimeout () from /lib/libc.so.2</span>
</span><span class='line'><span class="cp">#1  0xb0317ac4 in sleep () from /lib/libc.so.2</span>
</span><span class='line'><span class="cp">#2  0x0804ba79 in ACls::func(void*) (arg=0x0)</span>
</span><span class='line'>    <span class="n">at</span> <span class="nl">C</span><span class="p">:</span><span class="o">/</span><span class="n">p4</span><span class="o">/</span><span class="n">LEADER_EM_DEV</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="nl">cpp</span><span class="p">:</span><span class="mi">38</span>
</span></code></pre></td></tr></table></div></figure>


<h3>LINUX:</h3>

<p>It runs fine in Linux platform:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span>
</span><span class='line'><span class="k">static</span> <span class="n">ACls</span><span class="o">&amp;</span> <span class="n">ACls</span><span class="o">::</span><span class="n">get_instance</span><span class="p">()</span> <span class="mi">140430000215872</span>
</span><span class='line'><span class="n">ACls</span><span class="o">::</span><span class="n">ACls</span><span class="p">()</span> <span class="o">-</span> <span class="nl">tid</span><span class="p">:</span> <span class="mi">140429980940032</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="mi">140429980940032</span>
</span><span class='line'><span class="k">static</span> <span class="n">ACls</span><span class="o">&amp;</span> <span class="n">ACls</span><span class="o">::</span><span class="n">get_instance</span><span class="p">()</span> <span class="mi">140429980940032</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">-</span> <span class="nl">i</span><span class="p">:</span> <span class="mi">1730230016</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ACls</span><span class="o">::</span><span class="n">func</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">-</span> <span class="nl">i</span><span class="p">:</span> <span class="mi">1730230016</span>
</span><span class='line'>
</span><span class='line'><span class="err">$</span> <span class="n">ps</span> <span class="o">-</span><span class="n">efL</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">unit</span>
</span><span class='line'><span class="n">wanglij</span>   <span class="mi">7218</span>  <span class="mi">3780</span>  <span class="mi">7218</span>  <span class="mi">0</span>    <span class="mi">2</span> <span class="mi">18</span><span class="o">:</span><span class="mi">34</span> <span class="n">pts</span><span class="o">/</span><span class="mi">3</span>    <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span> <span class="p">.</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span>
</span><span class='line'><span class="n">wanglij</span>   <span class="mi">7218</span>  <span class="mi">3780</span>  <span class="mi">7219</span>  <span class="mi">0</span>    <span class="mi">2</span> <span class="mi">18</span><span class="o">:</span><span class="mi">34</span> <span class="n">pts</span><span class="o">/</span><span class="mi">3</span>    <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span> <span class="p">.</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span>
</span><span class='line'><span class="err">$</span> <span class="n">sudo</span> <span class="n">gcore</span> <span class="mi">7218</span>
</span><span class='line'><span class="p">[</span><span class="n">New</span> <span class="n">LWP</span> <span class="mi">7219</span><span class="p">]</span>
</span><span class='line'><span class="p">[</span><span class="n">Thread</span> <span class="n">debugging</span> <span class="k">using</span> <span class="n">libthread_db</span> <span class="n">enabled</span><span class="p">]</span>
</span><span class='line'><span class="n">Using</span> <span class="n">host</span> <span class="n">libthread_db</span> <span class="n">library</span> <span class="s">&quot;/usr/lib/libthread_db.so.1&quot;</span><span class="p">.</span>
</span><span class='line'><span class="mh">0x00007f21031ac83d</span> <span class="n">in</span> <span class="n">pause</span> <span class="p">()</span> <span class="n">from</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libpthread</span><span class="p">.</span><span class="n">so</span><span class="mf">.0</span>
</span><span class='line'><span class="n">Saved</span> <span class="n">corefile</span> <span class="n">core</span><span class="mf">.7218</span>
</span><span class='line'><span class="err">$</span> <span class="n">gdb</span> <span class="n">unit</span><span class="o">-</span><span class="n">tests</span> <span class="n">core</span><span class="mf">.7218</span>
</span><span class='line'><span class="n">GNU</span> <span class="n">gdb</span> <span class="p">(</span><span class="n">GDB</span><span class="p">)</span> <span class="mf">7.11</span>
</span><span class='line'><span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2016</span> <span class="n">Free</span> <span class="n">Software</span> <span class="n">Foundation</span><span class="p">,</span> <span class="n">Inc</span><span class="p">.</span>
</span><span class='line'><span class="n">License</span> <span class="n">GPLv3</span><span class="o">+:</span> <span class="n">GNU</span> <span class="n">GPL</span> <span class="n">version</span> <span class="mi">3</span> <span class="n">or</span> <span class="n">later</span> <span class="o">&lt;</span><span class="nl">http</span><span class="p">:</span><span class="c1">//gnu.org/licenses/gpl.html&gt;</span>
</span><span class='line'><span class="n">This</span> <span class="n">is</span> <span class="n">free</span> <span class="nl">software</span><span class="p">:</span> <span class="n">you</span> <span class="n">are</span> <span class="n">free</span> <span class="n">to</span> <span class="n">change</span> <span class="n">and</span> <span class="n">redistribute</span> <span class="n">it</span><span class="p">.</span>
</span><span class='line'><span class="n">There</span> <span class="n">is</span> <span class="n">NO</span> <span class="n">WARRANTY</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="n">extent</span> <span class="n">permitted</span> <span class="n">by</span> <span class="n">law</span><span class="p">.</span>  <span class="n">Type</span> <span class="s">&quot;show copying&quot;</span>
</span><span class='line'><span class="n">and</span> <span class="s">&quot;show warranty&quot;</span> <span class="k">for</span> <span class="n">details</span><span class="p">.</span>
</span><span class='line'><span class="n">This</span> <span class="n">GDB</span> <span class="n">was</span> <span class="n">configured</span> <span class="n">as</span> <span class="s">&quot;x86_64-pc-linux-gnu&quot;</span><span class="p">.</span>
</span><span class='line'><span class="n">Type</span> <span class="s">&quot;show configuration&quot;</span> <span class="k">for</span> <span class="n">configuration</span> <span class="n">details</span><span class="p">.</span>
</span><span class='line'><span class="n">For</span> <span class="n">bug</span> <span class="n">reporting</span> <span class="n">instructions</span><span class="p">,</span> <span class="n">please</span> <span class="nl">see</span><span class="p">:</span>
</span><span class='line'><span class="o">&lt;</span><span class="nl">http</span><span class="p">:</span><span class="c1">//www.gnu.org/software/gdb/bugs/&gt;.</span>
</span><span class='line'><span class="n">Find</span> <span class="n">the</span> <span class="n">GDB</span> <span class="n">manual</span> <span class="n">and</span> <span class="n">other</span> <span class="n">documentation</span> <span class="n">resources</span> <span class="n">online</span> <span class="nl">at</span><span class="p">:</span>
</span><span class='line'><span class="o">&lt;</span><span class="nl">http</span><span class="p">:</span><span class="c1">//www.gnu.org/software/gdb/documentation/&gt;.</span>
</span><span class='line'><span class="n">For</span> <span class="n">help</span><span class="p">,</span> <span class="n">type</span> <span class="s">&quot;help&quot;</span><span class="p">.</span>
</span><span class='line'><span class="n">Type</span> <span class="s">&quot;apropos word&quot;</span> <span class="n">to</span> <span class="n">search</span> <span class="k">for</span> <span class="n">commands</span> <span class="n">related</span> <span class="n">to</span> <span class="s">&quot;word&quot;</span><span class="p">...</span>
</span><span class='line'><span class="n">Reading</span> <span class="n">symbols</span> <span class="n">from</span> <span class="n">unit</span><span class="o">-</span><span class="n">tests</span><span class="p">...</span><span class="n">done</span><span class="p">.</span>
</span><span class='line'><span class="p">[</span><span class="n">New</span> <span class="n">LWP</span> <span class="mi">7218</span><span class="p">]</span>
</span><span class='line'><span class="p">[</span><span class="n">New</span> <span class="n">LWP</span> <span class="mi">7219</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="nl">warning</span><span class="p">:</span> <span class="n">Could</span> <span class="n">not</span> <span class="n">load</span> <span class="n">shared</span> <span class="n">library</span> <span class="n">symbols</span> <span class="k">for</span> <span class="n">linux</span><span class="o">-</span><span class="n">vdso</span><span class="p">.</span><span class="n">so</span><span class="mf">.1</span><span class="p">.</span>
</span><span class='line'><span class="n">Do</span> <span class="n">you</span> <span class="n">need</span> <span class="s">&quot;set solib-search-path&quot;</span> <span class="n">or</span> <span class="s">&quot;set sysroot&quot;</span><span class="o">?</span>
</span><span class='line'><span class="p">[</span><span class="n">Thread</span> <span class="n">debugging</span> <span class="k">using</span> <span class="n">libthread_db</span> <span class="n">enabled</span><span class="p">]</span>
</span><span class='line'><span class="n">Using</span> <span class="n">host</span> <span class="n">libthread_db</span> <span class="n">library</span> <span class="s">&quot;/usr/lib/libthread_db.so.1&quot;</span><span class="p">.</span>
</span><span class='line'><span class="n">Core</span> <span class="n">was</span> <span class="n">generated</span> <span class="n">by</span> <span class="err">`</span><span class="p">.</span><span class="o">/</span><span class="n">unit</span><span class="o">-</span><span class="n">tests</span><span class="err">&#39;</span><span class="p">.</span>
</span><span class='line'><span class="cp">#0  0x00007f21031ac83d in pause () from /usr/lib/libpthread.so.0</span>
</span><span class='line'><span class="p">[</span><span class="n">Current</span> <span class="kr">thread</span> <span class="n">is</span> <span class="mi">1</span> <span class="p">(</span><span class="n">Thread</span> <span class="mh">0x7f21037bf740</span> <span class="p">(</span><span class="n">LWP</span> <span class="mi">7218</span><span class="p">))]</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">info</span> <span class="kr">thread</span>
</span><span class='line'>  <span class="n">Id</span>   <span class="n">Target</span> <span class="n">Id</span>         <span class="n">Frame</span>
</span><span class='line'><span class="o">*</span> <span class="mi">1</span>    <span class="n">Thread</span> <span class="mh">0x7f21037bf740</span> <span class="p">(</span><span class="n">LWP</span> <span class="mi">7218</span><span class="p">)</span> <span class="mh">0x00007f21031ac83d</span> <span class="n">in</span> <span class="n">pause</span> <span class="p">()</span> <span class="n">from</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libpthread</span><span class="p">.</span><span class="n">so</span><span class="mf">.0</span>
</span><span class='line'>  <span class="mi">2</span>    <span class="n">Thread</span> <span class="mh">0x7f210255d700</span> <span class="p">(</span><span class="n">LWP</span> <span class="mi">7219</span><span class="p">)</span> <span class="mh">0x00007f210261561d</span> <span class="n">in</span> <span class="n">nanosleep</span> <span class="p">()</span> <span class="n">from</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libc</span><span class="p">.</span><span class="n">so</span><span class="mf">.6</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">bt</span>
</span><span class='line'><span class="cp">#0  0x00007f21031ac83d in pause () from /usr/lib/libpthread.so.0</span>
</span><span class='line'><span class="cp">#1  0x0000000000400cd5 in main () at /home/wanglij/P4/LEADER_EM_DEV/unit-tests/src/main.cpp:53</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="kr">thread</span> <span class="mi">2</span>
</span><span class='line'><span class="p">[</span><span class="n">Switching</span> <span class="n">to</span> <span class="kr">thread</span> <span class="mi">2</span> <span class="p">(</span><span class="n">Thread</span> <span class="mh">0x7f210255d700</span> <span class="p">(</span><span class="n">LWP</span> <span class="mi">7219</span><span class="p">))]</span>
</span><span class='line'><span class="cp">#0  0x00007f210261561d in nanosleep () from /usr/lib/libc.so.6</span>
</span><span class='line'><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">bt</span>
</span><span class='line'><span class="cp">#0  0x00007f210261561d in nanosleep () from /usr/lib/libc.so.6</span>
</span><span class='line'><span class="cp">#1  0x00007f210261556a in sleep () from /usr/lib/libc.so.6</span>
</span><span class='line'><span class="cp">#2  0x000000000040107e in ACls::func (arg=&lt;optimized out&gt;) at /home/wanglij/P4/LEADER_EM_DEV/unit-tests/src/main.cpp:38</span>
</span><span class='line'><span class="cp">#3  0x00007f21031a3424 in start_thread () from /usr/lib/libpthread.so.0</span>
</span><span class='line'><span class="cp">#4  0x00007f2102645cbd in clone () from /usr/lib/libc.so.6</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Conclusion</h3>

<p>For the QNX result, by looking at the value of the member variables, we can see that single instance of the class was still guaranteed,
but the constructor method was called twice. If we let the constructor sleep for a second after creating a new thread, then number of the threads will increase exponentially.
Whereas in Linux environment, this program runs OK, even if we let it sleep for 10 seconds after creating a new thread.
No idea if the re-entrant of constructor is defined C++ standard, but it doesn&rsquo;t make much sense to me to invoke the same constructor within the it.
So I guess it might be a bug of gcc of QNX version.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Acts 5 Study Notes]]></title>
    <link href="http://wanglij.github.io/blog/2016/06/03/acts-5-study-notes/"/>
    <updated>2016-06-03T19:31:33+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/06/03/acts-5-study-notes</id>
    <content type="html"><![CDATA[<h3>亚拿尼亚和撒非喇欺哄圣灵而死</h3>

<p><span style="background-color:yellow">
1 有一个人名叫亚拿尼亚，同他的妻子撒非喇卖了田产， <br>
2 把价银私自留下几份，他的妻子也知道，其余的几份拿来放在使徒脚前。 <br>
3 彼得说：“亚拿尼亚，为什么<strong>撒旦充满了你的心</strong>，叫你<strong>欺哄圣灵</strong>，<br>
把田地的价银私自留下几份呢？<br>
4 田地还没有卖，不是你自己的吗？<br>
  既卖了，价银不是你做主吗？<br>
  你怎么心里起这意念呢？<br>
  你<strong>不是欺哄人，是欺哄神</strong>了！” <br>
5 亚拿尼亚听见这话，就仆倒，断了气。听见的人都<strong>甚惧怕</strong>。<br>
6 有些少年人起来，把他包裹，抬出去埋葬了。<br>
</span></p>

<p><span style="background-color:yellow">
7 约过了三小时，他的妻子进来，还不知道这事。<br>
8 彼得对她说：“你告诉我，你们卖田地的价银就是这些吗？”<br>
  她说：“就是这些。” <br>
9 彼得说：“你们为什么<strong>同心试探主的灵</strong>呢？<br>
  埋葬你丈夫之人的脚已到门口，他们也要把你抬出去。” <br>
10 妇人立刻仆倒在彼得脚前，断了气。<br>
   那些少年人进来，见她已经死了，就抬出去，埋在她丈夫旁边。<br>
11 全教会和听见这事的人都<strong>甚惧怕</strong>。<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q: 亚拿尼亚和撒非喇罪在何处？<br>
撒旦充满了你的心，欺哄圣灵，同心试探主的灵。<br>
明明只是“几分”，却说成是“卖田地的价银就是这些”。<br>
他们有意隐瞒，以为他们可以欺哄人，企图沽名钓誉，岂不知他们欺哄的是神。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>约翰福音 8:44 你们是出于你们的父魔鬼，你们父的私欲你们偏要行。他从起初是杀人的，不守真理，因他心里没有真理。他说谎是出于自己，因他本来是说谎的，也是说谎之人的父。</span></code></pre></td></tr></table></div></figure>


<p>Q: 对他们的处罚是否太重？<br>
•神的教會是聖潔，不容罪惡的；<br>
•神是輕漫不得的（加六7）；<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>加拉太书 6：7a 不要自欺，神是轻慢不得的。</span></code></pre></td></tr></table></div></figure>


<p>Q: 如何理解“惧怕”？<br>
•「懼怕」意思是「敬畏」—無論是神的神蹟還是懲罰，都會使人敬畏神；</p>

<h3>信者越发增添</h3>

<p><span style="background-color:yellow">
12 <strong>主借使徒的手</strong>在民间行了许多神迹奇事。<br>
   他们[a]都同心合意地在<strong>所罗门的廊下</strong>。<br>
13 其余的人没有一个敢贴近他们，百姓却尊重他们。<br>
14 信而归主的人越发增添，连男带女很多。 <br>
15 甚至有人将病人抬到街上，放在床上或褥子上，<br>
   指望彼得过来的时候，或者得他的影儿照在什么人身上。<br>
16 还有许多人带着病人和被污鬼缠磨的，<br>
   从耶路撒冷四围的城邑来，全都得了医治。<br>
</span></p>

<p>Q： 这些神迹奇事、治病、赶鬼是出于谁？</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>约翰福音 14:12-13
</span><span class='line'>12 我实实在在地告诉你们：我所做的事，信我的人也要做，并且要做比这更大的事，因为我往父那里去。 
</span><span class='line'>13 你们奉我的名无论求什么，我必成就，叫父因儿子得荣耀。</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>马可福音 16:17-18 
</span><span class='line'>17 信的人必有神迹随着他们，就是：奉我的名赶鬼；说新方言； 
</span><span class='line'>18 手能拿蛇；若喝了什么毒物，也必不受害；手按病人，病人就必好了。”</span></code></pre></td></tr></table></div></figure>


<p>Q: 所罗门的廊下<br>
可以容纳很多人，在那里讲论也是平常的事情，所以传道也不会有什么问题。</p>

<h3>使徒二次被囚</h3>

<p><span style="background-color:yellow">
17 大祭司和他的一切同人，就是撒都该教门的人，都起来，满心<strong>忌恨</strong>，<br>
18 就下手拿住使徒，收在外监。<br>
</span></p>

<h3>使徒出监仍然讲道</h3>

<p><span style="background-color:yellow">
19 但主的使者夜间开了监门，领他们出来， <br>
20 说：“你们去站在殿里，把这<strong>生命的道</strong>都讲给百姓听。” <br>
21 使徒听了这话，天将亮的时候就进殿里去教训人。<br>
   大祭司和他的同人来了，叫齐公会的人和以色列族的众长老，<br>
   就差人到监里去，要把使徒提出来。 <br>
22 但差役到了，不见他们在监里，就回来禀报说： <br>
23 “我们看见监牢关得极妥当，看守的人也站在门外，<br>
   及至开了门，里面一个人都不见。”<br>
24 守殿官和祭司长听见这话，心里犯难，不知这事将来如何。 <br>
25 有一个人来禀报说：“你们收在监里的人，现在站在殿里教训百姓！” <br>
26 于是守殿官和差役去带使徒来，并没有用强暴，因为怕百姓用石头打他们。<br>
</span></p>

<h3>再到公会前被审</h3>

<p><span style="background-color:yellow">
27 带到了，便叫使徒站在公会前。大祭司问他们说： <br>
28 “我们不是严严地禁止你们，不可奉这名教训人吗？<br>
   你们倒把你们的道理充满了耶路撒冷，想要叫这人的血归到我们身上！”<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q: 叫这人的血归到我们身上?</p>

<p><span style="background-color:yellow">
29 彼得和众使徒回答说：“<strong>顺从神不顺从人，是应当的。</strong> <br>
30 你们挂在木头上杀害的耶稣，我们祖宗的神已经叫他复活。 <br>
31 神且用右手将他高举[b]，叫他做<strong>君王</strong>、做<strong>救主</strong>，<br>
   将<strong>悔改的心</strong>和<strong>赦罪的恩赐</strong>给以色列人。 <br>
32 我们为这事作见证，神赐给顺从之人的圣灵也为这事作见证。”<br>
</span></p>

<h3>迦玛列的劝诫</h3>

<p><span style="background-color:yellow">
33 公会的人听见就极其恼怒，想要杀他们。 <br>
34 但有一个法利赛人名叫<strong>迦玛列</strong>，<br>
   是众百姓所敬重的教法师，<br>
   在公会中站起来，吩咐人把使徒暂且带到外面去， <br>
35 就对众人说：“以色列人哪，论到这些人，你们应当小心怎样办理。<br>
36 从前丢大起来，自夸为大，附从他的人约有四百。<br>
   他被杀后，附从他的全都散了，归于无有。 <br>
37 此后，报名上册的时候，又有加利利的犹大起来，引诱些百姓跟从他。<br>
   他也灭亡，附从他的人也都四散了。 <br>
38 现在我劝你们不要管这些人，任凭他们吧！<br>
   他们所谋的、所行的，<strong>若是出于人，必要败坏</strong>； <br>
39 <strong>若是出于神，你们就不能败坏他们</strong>，恐怕你们倒是攻击神了！” <br>
40 公会的人听从了他，便叫使徒来，把他们打了，<br>
   又吩咐他们不可奉耶稣的名讲道，就把他们释放了。<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q: 迦玛列<br>
是第一世纪中叶犹太公会（Sanhedrin）中最主要的权威人士。<br>
是保罗的老师。<br>
<a href="https://zh.wikipedia.org/wiki/%E8%BF%A6%E7%8E%9B%E5%88%97">https://zh.wikipedia.org/wiki/%E8%BF%A6%E7%8E%9B%E5%88%97</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>使徒行传 22:3 保罗说：“我原是犹太人，生在基利家的大数，长在这城里；在迦玛列门下，按着我们祖宗严紧的律法受教；热心侍奉神，像你们众人今日一样。</span></code></pre></td></tr></table></div></figure>


<h3>欢喜配受辱</h3>

<p><span style="background-color:yellow">
41 他们离开公会，心里<strong>欢喜</strong>，因<strong>被算是配为这名受辱</strong>。 <br>
42 他们就每日在殿里、在家里不住地教训人，传耶稣是基督。<br>
</span></p>

<p>Q: 他们为什么欢喜？<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>提摩太后书 1:8 你不要以给我们的主作见证为耻，也不要以我这为主被囚的为耻，总要按神的能力与我为福音同受苦难。</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Acts 4 Study Notes]]></title>
    <link href="http://wanglij.github.io/blog/2016/05/13/acts-4-study-notes/"/>
    <updated>2016-05-13T13:16:00+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/05/13/acts-4-study-notes</id>
    <content type="html"><![CDATA[<h3>彼得约翰被拿</h3>

<p><span style="background-color:yellow">
1 使徒对百姓说话的时候，<br>
  <strong>祭司们和守殿官并撒都该人</strong>忽然来了。 <br>
2 因他们教训百姓，本着耶稣传说<strong>死人复活</strong>，就很烦恼， <br>
3 于是下手拿住他们。<br>
  因为天已经晚了，就把他们押到第二天。 <br>
4 但听道之人有许多信的，<strong>男丁数目约到五千</strong>。
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q：撒都该人是何人？他们为什么要捉拿使徒？祭司们和守殿官并撒都该人何以有权捉拿使徒？
犹太教的四大派：<br>
法利赛人（Pharisees）：保持純潔而與俗世保持距離；对口传法律相当敬崇，认为是摩西法律书的一部分。<br>
撒都该人（Sadducess）：他们不相信灵魂的不灭；肉身的复活；天使以及神灵的存在。撒都该反对法利赛的口传律法，他们认为文字律法是唯一的神圣资料。他们也拥护罗马的统治，注重物质的享受。这些人多为祭司与犹太贵族及富人，因此穷人多数赞成法利赛党的主张。撒都该党徒在当时握有宗教大权，他们反对使徒传复活之道，所以来捉拿他们。这里是说：祭司们和守殿宫并撒都该人，并非是罗马兵丁。这种捉拿与审判是纯粹宗教性的，与政治无关。<br>
艾賽尼派（Essenes）：分布在各大城市，过着集体生活，推崇禁欲主义(有的甚至单身)、安贫乐道、每日清洁。<br>
奋锐党（Zealots）：基本上认同法利赛的教训；但对自由十分向往，称上帝是他们唯一的主宰和君主；反对罗马统治，用暴力手段打击罗马人和希腊人。<br></p>

<p>Q：福音书提到的撒都该人：<br>
太二十二章23一33节</p>

<p>Q：五千男丁信主<br></p>

<h3>到公会前被审</h3>

<p><span style="background-color:yellow">
5 第二天，<strong>官府、长老和文士</strong>在耶路撒冷聚会，<br>
6 又有<strong>大祭司亚那和该亚法</strong>、约翰、亚历山大，并大祭司的亲族都在那里，<br>
</span></p>

<p><span style="background-color:yellow">
7 叫使徒站在当中，就问他们说：<br>
<strong>“你们用什么能力，奉谁的名做这事呢？”</strong><br>
8 那时彼得<strong>被圣灵充满</strong>，对他们说： <br>
9 “治民的官府和长老啊，<br>
倘若今日因为在残疾人身上所行的善事，查问我们他是怎么得了痊愈， <br>
10 你们众人和以色列百姓都当知道：<br>
站在你们面前的这人得痊愈，<br>
是<strong>因你们所钉十字架、</strong><br>
<strong>神叫他从死里复活</strong>的<br>
<strong>拿撒勒人耶稣基督</strong>的名。<br>
</span></p>

<p><span style="background-color:yellow">
11 “他是‘你们匠人所弃的石头，已成了房角的头块石头’。<br>
12 <strong>除他以外，别无拯救，</strong><br>
因为在天下人间，没有赐下别的名我们可以靠着得救。”<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q：官府、长老和文士是什么人？什么是公会？大祭司亚那和该亚法是谁？<br>
『官府』指祭司长们；『长老』指民间的绅耆；『文士』多为法利赛人，他们深谙旧约律法和古人的遗传。
公会是由这三班人组成的，也是以色列的最高法院；定主耶稣死罪的就是他们。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>路加福音22:66 天一亮，民间的众长老连祭司长带文士都聚会，把耶稣带到他们的公会里，
</span><span class='line'>马太福音26:57 拿耶稣的人把他带到大祭司该亚法那里去，文士和长老已经在那里聚会。 
</span><span class='line'>约翰福音18:12-14
</span><span class='line'>12 那队兵和千夫长并犹太人的差役就拿住耶稣，把他捆绑了， 
</span><span class='line'>13 先带到亚那面前，因为亚那是本年做大祭司该亚法的岳父。 
</span><span class='line'>14 这该亚法就是从前向犹太人发议论说“一个人替百姓死是有益的”那位。</span></code></pre></td></tr></table></div></figure>


<p>Q：“匠人所弃的房角的头块石头”从何而来？<br>
诗篇118:21-23</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>21 我要称谢你，因为你已经应允我，又成了我的拯救。
</span><span class='line'>22 匠人所弃的石头，已成了房角的头块石头。
</span><span class='line'>23 这是耶和华所做的，在我们眼中看为稀奇。</span></code></pre></td></tr></table></div></figure>


<p>但以理书2:31-45<br></p>

<p>Q: 除他以外，别无拯救<br></p>

<p>Q：被圣灵充满印证了主的应许。大家有没有被圣灵充满的经历？<br>
路加福音 12:10-12</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>11 人带你们到会堂，并官府和有权柄的人面前，不要思虑怎么分诉，说什么话， 
</span><span class='line'>12 因为正在那时候，圣灵要指教你们当说的话。”</span></code></pre></td></tr></table></div></figure>


<h3>恐吓而放</h3>

<p><span style="background-color:yellow">
13 他们见彼得、约翰的<strong>胆量</strong>，<br>
   又看出他们<strong>原是没有学问的小民</strong>，<br>
   就稀奇，认明他们是跟过耶稣的。 <br>
14 又看见那治好了的人和他们一同站着，就无话可驳。<br>
</span></p>

<p><span style="background-color:yellow">
15 于是吩咐他们从公会出去，就彼此商议说： <br>
16 “我们当怎样办这两个人呢？<br>
   因为他们诚然行了一件<strong>明显的神迹</strong>，<br>
   凡住<strong>耶路撒冷的人都知道</strong>，<br>
   我们也不能说没有。 <br>
17 唯恐这事越发<strong>传扬在民间</strong>，<br>
   我们必须恐吓他们，<br>
   叫他们不再奉这名对人讲论。” <br>
</span></p>

<p><span style="background-color:yellow">
18 于是叫了他们来，<strong>禁止他们总不可奉耶稣的名</strong>讲论、教训人。 <br>
19 彼得、约翰说：<br>
   <strong>“听从你们不听从神，这在神面前合理不合理，</strong><br>
   <strong>你们自己酌量吧！</strong> <br>
20 <strong>我们所看见、所听见的，不能不说。”</strong> <br>
21 官长为百姓的缘故，想不出法子刑罚他们，<br>
   <strong>又恐吓一番</strong>，把他们释放了。<br>
   这是因<strong>众人为所行的奇事都归荣耀于神</strong>。 <br>
22 原来借着神迹医好的那人有四十多岁了。
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q: 彼得、约翰的哪两点让他们稀奇？胆量、学问。<br>
Q: 审判彼得和约翰的这些人的心理活动是怎样的？<br>
为难（怎样办）；<br>
没办法耍赖（他们诚然行了一件明显的神迹，凡住耶路撒冷的人都知道，我们也不能说没有。）<br>
害怕（唯恐这事越发传扬在民间）<br>
Q： 他们最后决定如何逼迫使徒？<br>
恐吓（我们必须恐吓他们，叫他们不再奉这名对人讲论）<br>
Q: 结果又如何？因为什么？<br>
反被彼得、约翰教训（v19），最后不得以把他们释放了，释放之前又无谓地恐吓一番。
因为此事是出于神在众人面前是显然的（众人为所行的奇事都归荣耀于神）。</p>

<h3>门徒同心祷告赞美</h3>

<p><span style="background-color:yellow">
23 二人既被释放，就<strong>到会友那里去，</strong><br>
   把祭司长和长老所说的话都告诉他们。<br>
</span></p>

<p><span style="background-color:yellow">
24 他们听见了，就同心合意地高声向神说：<br>
   <strong>“主啊，你是造天、地、海和其中万物的！</strong> <br>
25 <strong>你曾借着圣灵，托你仆人——我们祖宗大卫的口说：</strong><br>
   <strong>‘外邦为什么争闹？万民为什么谋算虚妄的事？</strong><br>
26 <strong>世上的君王一齐起来，臣宰也聚集，</strong><br>
   <strong>要抵挡主并主的受膏者。’</strong> <br>
27 <strong>希律和本丢·彼拉多，外邦人和以色列民，果然在这城里聚集，</strong><br>
   <strong>要攻打你所膏的圣仆耶稣，</strong><br>
28 <strong>成就你手和你意旨所预定必有的事。</strong><br>
29 <strong>他们恐吓我们，现在求主鉴察，</strong><br>
   <strong>一面叫你仆人大放胆量讲你的道，</strong> <br>
30 <strong>一面伸出你的手来医治疾病，</strong><br>
   <strong>并且使神迹奇事因着你圣仆耶稣的名行出来。”</strong> <br>
31 祷告完了，聚会的地方震动，他们就都<strong>被圣灵充满</strong>，放胆讲论神的道。
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q: 遭到逼迫后，彼得和约翰是如何做的？到会友中<br>
Q: 到会友中去干什么？分享，同心合意地祷告<br>
Q： 祷告中，大卫的话出自：诗篇2:1-2<br>
Q： 从这段同心合意的祷告中，我们能学到什么？<br>
Q： 通过学习3,4章，对我们传福音有什么启示？<br></p>

<h3>信徒财物不分彼此</h3>

<p><span style="background-color:yellow">
32 那许多信的人都是一心一意的，没有一人说他的东西有一样是自己的，都是大家公用。 <br>
33 使徒大有能力，见证主耶稣复活，众人也都蒙大恩。 <br>
34 内中也没有一个缺乏的，因为人人将田产房屋都卖了，把所卖的价银拿来， <br>
35 放在使徒脚前，照各人所需用的分给各人。<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q: 大家为什么财务公用？这和共产主义的合作社如何区别？<br>
初代教會的特質: <br>
- 同心合意，放膽為主見證
- 行神績
- 凡物公用 —彼此相愛，真正無私</p>

<p>原因： 当时人们以为耶稣会在他们的有生之年再来，多数信徒比较贫穷，信徒们迫切地传福音需要;<br>
      这也必是出于圣灵的带领，使得福音在短时间里迅速的传开。<br>
区别： 一个是出于神，另一个是出于人。<br></p>

<h3>巴拿巴卖产捐银</h3>

<p><span style="background-color:yellow">
36 有一个利未人，生在塞浦路斯，名叫约瑟，<br>
使徒称他为巴拿巴（“巴拿巴”翻出来就是“劝慰子”）。 <br>
37 他有田地，也卖了，把价银拿来放在使徒脚前。<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>Q: 巴拿巴： <br>
巴拿巴原名約瑟，是個猶太的利未人，生在塞浦路斯。具有谦卑，善于权威鼓励人的品格。巴拿巴可能頗為富有，留意到信徒同工的匱乏，卻毫不吝嗇，於是慷慨解囊。<br>
<a href="https://zh.wikipedia.org/wiki/%E5%B7%B4%E6%8B%BF%E5%B7%B4">https://zh.wikipedia.org/wiki/%E5%B7%B4%E6%8B%BF%E5%B7%B4</a></p>

<h3>References</h3>

<p><a href="https://zh.wikipedia.org/wiki/">https://zh.wikipedia.org/wiki/</a><br>
<a href="http://bible.jidujiao.com/xinyueshenjinnanti/1/chapter133.html">http://bible.jidujiao.com/xinyueshenjinnanti/1/chapter133.html</a><br></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Illegal Instruction Error Due to Singleton Template]]></title>
    <link href="http://wanglij.github.io/blog/2016/04/12/illegal-instruction-error-due-to-singleton-template/"/>
    <updated>2016-04-12T22:21:12+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/04/12/illegal-instruction-error-due-to-singleton-template</id>
    <content type="html"><![CDATA[<p>Here is header file, singleton.hh, defining the template:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#ifndef _T_SINGLETON_HH_
</span><span class='line'>#define _T_SINGLETON_HH_
</span><span class='line'>
</span><span class='line'>template &lt;class T&gt;
</span><span class='line'>class Singleton
</span><span class='line'>{
</span><span class='line'>public:
</span><span class='line'>    static void construct()
</span><span class='line'>    {   
</span><span class='line'>        destruct();
</span><span class='line'>        instance_ = new T;
</span><span class='line'>    }   
</span><span class='line'>    static T*   getInstance()
</span><span class='line'>    {   
</span><span class='line'>        if (instance_ == 0)
</span><span class='line'>        {
</span><span class='line'>            instance_ = new T;
</span><span class='line'>        }
</span><span class='line'>        return instance_;
</span><span class='line'>    }   
</span><span class='line'>
</span><span class='line'>    template &lt;class A&gt;
</span><span class='line'>    static void construct(A a)
</span><span class='line'>    {   
</span><span class='line'>        destruct();
</span><span class='line'>        instance_ = new T(a);
</span><span class='line'>    }   
</span><span class='line'>    template &lt;class A&gt;
</span><span class='line'>    static T*   getInstance(A a)
</span><span class='line'>    {   
</span><span class='line'>        if (instance_ == 0)
</span><span class='line'>        {
</span><span class='line'>            instance_ = new T(a);
</span><span class='line'>        }
</span><span class='line'>        return instance_;
</span><span class='line'>    }   
</span><span class='line'>
</span><span class='line'>    static void destruct()
</span><span class='line'>    {   
</span><span class='line'>        delete instance_;
</span><span class='line'>        instance_ = 0;
</span><span class='line'>    }
</span><span class='line'>protected:
</span><span class='line'>    static T*   instance_;
</span><span class='line'>
</span><span class='line'>    Singleton() {}
</span><span class='line'>    virtual ~Singleton() {}
</span><span class='line'>private:
</span><span class='line'>    Singleton(Singleton const&);
</span><span class='line'>    Singleton& operator=(Singleton const&);
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>template &lt;class T&gt;
</span><span class='line'>T*  Singleton&lt;T&gt;::instance_ = 0;
</span><span class='line'>
</span><span class='line'>#endif  // _T_SINGLETON_HH_ //
</span></code></pre></td></tr></table></div></figure>


<p>And here is the example of using this template:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;iostream&gt;
</span><span class='line'>
</span><span class='line'>#include &lt;unistd.h&gt;
</span><span class='line'>#include &lt;pthread.h&gt;
</span><span class='line'>
</span><span class='line'>#include "singleton.hh"
</span><span class='line'>
</span><span class='line'>using namespace std;
</span><span class='line'>
</span><span class='line'>class X;
</span><span class='line'>class X1; 
</span><span class='line'>class ABase;
</span><span class='line'>class BBase;
</span><span class='line'>class BB; 
</span><span class='line'>class CBase;
</span><span class='line'>
</span><span class='line'>class X { 
</span><span class='line'>public:
</span><span class='line'>    virtual int getX() = 0;
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>class X1 : public X { 
</span><span class='line'>public:
</span><span class='line'>    int getX() { return 1; }
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>class Timer
</span><span class='line'>{
</span><span class='line'>private:
</span><span class='line'>   static Timer* t_; 
</span><span class='line'>   BBase* b_; 
</span><span class='line'>
</span><span class='line'>   Timer();
</span><span class='line'>   static void* go_helper(void* context);
</span><span class='line'>   void go();
</span><span class='line'>
</span><span class='line'>public:
</span><span class='line'>    virtual ~Timer() {}
</span><span class='line'>
</span><span class='line'>    static Timer* getInstance();
</span><span class='line'>    void subscribe(BBase* b); 
</span><span class='line'>    void unsubscribe(BBase* b) { b_ = NULL; }
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>class CBase {
</span><span class='line'>public:
</span><span class='line'>    CBase(BB& bb) : bb_(bb) {}
</span><span class='line'>    virtual void run() = 0;
</span><span class='line'>protected:
</span><span class='line'>    BB& bb_;
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>class C1 : public CBase,
</span><span class='line'>           public Singleton&lt;C1&gt;
</span><span class='line'>{
</span><span class='line'>public:
</span><span class='line'>    C1(BB& bb) : CBase(bb) {}
</span><span class='line'>    void run();
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>class BBase {
</span><span class='line'>public:
</span><span class='line'>    BBase(ABase& a) : a_(a) { Timer::getInstance()-&gt;subscribe(this); } 
</span><span class='line'>    virtual ~BBase() { Timer::getInstance()-&gt;unsubscribe(this); }
</span><span class='line'>    virtual void run() = 0;
</span><span class='line'>protected:
</span><span class='line'>    ABase&  a_; 
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>class BB : public BBase {
</span><span class='line'>public:
</span><span class='line'>    BB(ABase& a) : BBase(a) {
</span><span class='line'>        c = C1::getInstance(*this);
</span><span class='line'>//      c = new C1(*this);    IF WE USE THIS INSTEAD, THEN IT WILL WORK
</span><span class='line'>    }
</span><span class='line'>    int getX();
</span><span class='line'>    void run();
</span><span class='line'>private:
</span><span class='line'>    CBase*  c;
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>class ABase {
</span><span class='line'>public:
</span><span class='line'>    ABase() {
</span><span class='line'>        x = new X1;
</span><span class='line'>        b = new BB(*this);
</span><span class='line'>    }
</span><span class='line'>    void run();
</span><span class='line'>    int getX() { return x-&gt;getX(); }
</span><span class='line'>private:
</span><span class='line'>    X* x;
</span><span class='line'>    BBase* b;
</span><span class='line'>};
</span><span class='line'>
</span><span class='line'>Timer* Timer::t_ = NULL;
</span><span class='line'>
</span><span class='line'>Timer::Timer() : b_(NULL)
</span><span class='line'>{
</span><span class='line'>    pthread_t th;
</span><span class='line'>    pthread_create(&th, NULL, &Timer::go_helper, this);
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>Timer*
</span><span class='line'>Timer::getInstance() {
</span><span class='line'>    if (t_ == NULL)
</span><span class='line'>        t_ = new Timer;
</span><span class='line'>    return t_;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>void
</span><span class='line'>Timer::subscribe(BBase* b) { b_ = b; }
</span><span class='line'>
</span><span class='line'>void*
</span><span class='line'>Timer::go_helper(void* context) {
</span><span class='line'>    Timer *t = reinterpret_cast&lt;Timer*&gt;(context);
</span><span class='line'>    t-&gt;go();
</span><span class='line'>    return NULL;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>void
</span><span class='line'>Timer::go()
</span><span class='line'>{
</span><span class='line'>    while(1) {
</span><span class='line'>        sleep(1);
</span><span class='line'>        if (b_) b_-&gt;run();
</span><span class='line'>    }
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>void ABase::run() {
</span><span class='line'>    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; getX() &lt;&lt; endl;
</span><span class='line'>    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; x-&gt;getX() &lt;&lt; endl;
</span><span class='line'>    b-&gt;run();
</span><span class='line'>    while(1)
</span><span class='line'>        sleep(1);
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>int BB::getX() {
</span><span class='line'>    return a_.getX();
</span><span class='line'>}
</span><span class='line'>void BB::run() {
</span><span class='line'>    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; endl;
</span><span class='line'>    c-&gt;run();
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>void C1::run() {
</span><span class='line'>    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; bb_.getX() &lt;&lt; endl;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>int main()
</span><span class='line'>{
</span><span class='line'>    ABase*  a = new ABase;
</span><span class='line'>    a-&gt;run();
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Here is what I got:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>void ABase::run()1
</span><span class='line'>void ABase::run()1
</span><span class='line'>virtual void BB::run()
</span><span class='line'>zsh: segmentation fault (core dumped)  ./a.out</span></code></pre></td></tr></table></div></figure>


<p>And the stack given by gdb:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#0  0x00000000004012ba in ABase::getX (this=0x1) at tst_sigill.cc:89
</span><span class='line'>89        int getX() { return x-&gt;getX(); }
</span><span class='line'>[Current thread is 1 (Thread 0x7faa0f050740 (LWP 5351))]
</span><span class='line'>(gdb) bt
</span><span class='line'>#0  0x00000000004012ba in ABase::getX (this=0x1) at tst_sigill.cc:89
</span><span class='line'>#1  0x0000000000400e0c in BB::getX (this=0x7ffed6e821f0) at tst_sigill.cc:138
</span><span class='line'>#2  0x0000000000400e71 in C1::run (this=0xaeedd0) at tst_sigill.cc:146
</span><span class='line'>#3  0x0000000000400e51 in BB::run (this=0xaeec60) at tst_sigill.cc:142
</span><span class='line'>#4  0x0000000000400de3 in ABase::run (this=0xaeec20) at tst_sigill.cc:132
</span><span class='line'>#5  0x0000000000400ed1 in main () at tst_sigill.cc:152</span></code></pre></td></tr></table></div></figure>


<p>It&rsquo;s worth to be noticed that &ldquo;this&rdquo; pointer of BB and ABase classes seem like have been corrupted. NO CLUE WHY and HOW TO SOLVE THIS PROBLEM YET!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress Broken After Arch Linux Upgrade]]></title>
    <link href="http://wanglij.github.io/blog/2016/03/14/octopress-broken-after-arch-linux-upgrade/"/>
    <updated>2016-03-14T21:31:31+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/03/14/octopress-broken-after-arch-linux-upgrade</id>
    <content type="html"><![CDATA[<h3>Octopress issue</h3>

<p>After system upgrade, &ldquo;rake generate&rdquo; cannot generate posts and pages any more after system upgrade:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[wanglij@~/octopress]$ rake generate
</span><span class='line'>## Generating Site with Jekyll
</span><span class='line'>identical source/stylesheets/screen.css
</span><span class='line'>Notice: for 10x faster LSI support, please install http://rb-gsl.rubyforge.org/
</span><span class='line'>Configuration file: /home/wanglij/octopress/_config.yml
</span><span class='line'>/home/wanglij/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/openssl.rb:17:in `require': /home/wanglij/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/x86_64-linux/openssl.so: undefined symbol: SSLv2_method - /home/wanglij/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/x86_64-linux/openssl.so (LoadError)
</span><span class='line'>        from /home/wanglij/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/openssl.rb:17:in `&lt;top (required)&gt;'
</span><span class='line'>        from /home/wanglij/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/net/https.rb:22:in `require'
</span><span class='line'>        from /home/wanglij/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/net/https.rb:22:in `&lt;top (required)&gt;'
</span><span class='line'>        from /home/wanglij/octopress/plugins/gist_tag.rb:10:in `require'
</span><span class='line'>        from /home/wanglij/octopress/plugins/gist_tag.rb:10:in `&lt;top (required)&gt;'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/plugin_manager.rb:58:in `require'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/plugin_manager.rb:58:in `block (2 levels) in require_plugin_files'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/plugin_manager.rb:57:in `each'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/plugin_manager.rb:57:in `block in require_plugin_files'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/plugin_manager.rb:56:in `each'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/plugin_manager.rb:56:in `require_plugin_files'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/plugin_manager.rb:18:in `conscientious_require'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/site.rb:71:in `setup'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/site.rb:33:in `initialize'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/commands/build.rb:28:in `new'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/commands/build.rb:28:in `process'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/lib/jekyll/commands/build.rb:17:in `block (2 levels) in init_with_program'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/mercenary-0.3.4/lib/mercenary/command.rb:220:in `call'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/mercenary-0.3.4/lib/mercenary/command.rb:220:in `block in execute'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/mercenary-0.3.4/lib/mercenary/command.rb:220:in `each'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/mercenary-0.3.4/lib/mercenary/command.rb:220:in `execute'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/mercenary-0.3.4/lib/mercenary/program.rb:35:in `go'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/mercenary-0.3.4/lib/mercenary.rb:22:in `program'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/gems/jekyll-2.2.0/bin/jekyll:18:in `&lt;top (required)&gt;'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/bin/jekyll:23:in `load'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/bin/jekyll:23:in `&lt;main&gt;'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/bin/ruby_executable_hooks:15:in `eval'
</span><span class='line'>        from /home/wanglij/.rvm/gems/ruby-2.1.2/bin/ruby_executable_hooks:15:in `&lt;main&gt;'</span></code></pre></td></tr></table></div></figure>


<p>My initial thought is that it must be because ruby was updated to newer version. So I tried the following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[wanglij@~/octopress]$ rvm use 1.9.3
</span><span class='line'>Using /home/wanglij/.rvm/gems/ruby-1.9.3-p547
</span><span class='line'>[wanglij@~/octopress]$ rvm rubygems latest
</span><span class='line'>...
</span><span class='line'>[wanglij@~/octopress]$ rvm reinstall all --force</span></code></pre></td></tr></table></div></figure>


<p>After doing, this all the ruby versions installed were removed, but none of the ruby versions cannot be reinstalled successfully.
The make.log file has following errors:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ossl_ssl.c:116:27: error: \u2018SSLv3_method\u2019 undeclared here (not in a function)
</span><span class='line'>     OSSL_SSL_METHOD_ENTRY(SSLv3),
</span><span class='line'>                           ^
</span><span class='line'>ossl_ssl.c:106:69: note: in definition of macro \u2018OSSL_SSL_METHOD_ENTRY\u2019
</span><span class='line'> #define OSSL_SSL_METHOD_ENTRY(name) { #name, (SSL_METHOD *(*)(void))name##_method }
</span><span class='line'>                                                                     ^
</span><span class='line'>ossl_ssl.c:117:27: error: \u2018SSLv3_server_method\u2019 undeclared here (not in a function)
</span><span class='line'>     OSSL_SSL_METHOD_ENTRY(SSLv3_server),
</span><span class='line'>                           ^
</span><span class='line'>ossl_ssl.c:106:69: note: in definition of macro \u2018OSSL_SSL_METHOD_ENTRY\u2019
</span><span class='line'> #define OSSL_SSL_METHOD_ENTRY(name) { #name, (SSL_METHOD *(*)(void))name##_method }
</span><span class='line'>                                                                     ^
</span><span class='line'>ossl_ssl.c:118:27: error: \u2018SSLv3_client_method\u2019 undeclared here (not in a function)
</span><span class='line'>     OSSL_SSL_METHOD_ENTRY(SSLv3_client),
</span><span class='line'>                           ^
</span><span class='line'>ossl_ssl.c:106:69: note: in definition of macro \u2018OSSL_SSL_METHOD_ENTRY\u2019
</span><span class='line'> #define OSSL_SSL_METHOD_ENTRY(name) { #name, (SSL_METHOD *(*)(void))name##_method }</span></code></pre></td></tr></table></div></figure>


<p>Tried to install openssl package by running the following command, then install ruby.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[wanglij@~]$ rvm pkg install openssl</span></code></pre></td></tr></table></div></figure>


<p>Although the problem wasn&rsquo;t resolved, notice that the version downloaded by last command is 1.0.1, but the openssl in the system is 1.0.2g.
So after looking at the code of ossl_ssl, I think it must pick up an option which is not supported yet during configuring the build.
Then I did following to fix the problem:
First, clean rvm by removing everything in $HOME/.rvm folder.
Then reinstall rvm, ruby and octopress. BINGO!</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[wanglij@~]$ curl -k -sSL https://rvm.io/mpapis.asc | gpg2 --import -             
</span><span class='line'>[wanglij@~]$ curl -k -sSL https://get.rvm.io | bash
</span><span class='line'>[wanglij@~]$ sudo pacman -U /var/cache/pacman/pkg/openssl-1.0.1.k-1-x86_64.pkg.tar.xz
</span><span class='line'>[wanglij@~]$ sudo pacman -U /var/cache/pacman/pkg/curl-7.39.0-1-x86_64.pkg.tar.xz    
</span><span class='line'>[wanglij@~]$ rvm install 1.9.3
</span><span class='line'>[wanglij@~]$ rvm rubygems latest 
</span><span class='line'>[wanglij@~]$ cd octopress
</span><span class='line'>[wanglij@~/octopress]$ gem install bundler  
</span><span class='line'>[wanglij@~/octopress]$ bundle install </span></code></pre></td></tr></table></div></figure>


<p>NOTE: The reason of downgrading the curl to an older version is that the latest curl requires openssl 1.0.2g. Without the latest openssl, the curl gives the following error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/usr/lib/libcurl.so.4: undefined symbol: SSL_CTX_set_alpn_protos</span></code></pre></td></tr></table></div></figure>


<p>This is what we came across when fixing yaourt in <a href="http://wanglij.github.io/blog/2016/01/15/behind-companys-firewall/">here</a>.</p>

<h3>References</h3>

<p><a href="http://purplepalmdash.github.io/blog/2014/07/30/zai-githubshang-bu-shu-ni-de-octopressbo-ke/">http://purplepalmdash.github.io/blog/2014/07/30/zai-githubshang-bu-shu-ni-de-octopressbo-ke/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Shared Folder Not Mounted After Arch Linux Upgrade]]></title>
    <link href="http://wanglij.github.io/blog/2016/03/11/shared-folder-not-mounted-after-arch-linux-upgrade/"/>
    <updated>2016-03-11T19:37:51+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/03/11/shared-folder-not-mounted-after-arch-linux-upgrade</id>
    <content type="html"><![CDATA[<p>My Arch Linux as guest in VWWare will be broken after system upgrade everytime. This is because the shared folder cannot be mounted. Consequently, the systemctl will stop all the services including network and enter a maintenance mode.</p>

<h3>1st shot</h3>

<p>Run the following line:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># mkinitcpio -p linux</span></code></pre></td></tr></table></div></figure>


<p>It complained an error about vmhgfs, so I guess it was broken.</p>

<p>Comment all the lines related to mounting shared folders using vmhgfs file type, and reboot the system, so that we can have the Linux properly started with network service working.</p>

<p>Then re-install open-vm-tools-dkms package:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yaourt --insecure -S open-vm-tools-dkms</span></code></pre></td></tr></table></div></figure>


<p>After the installation completed, run mkinitcpio again:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo mkinitcpio -p linux
</span><span class='line'>==&gt; Building image from preset: /etc/mkinitcpio.d/linux.preset: 'default'
</span><span class='line'>  -&gt; -k /boot/vmlinuz-linux -c /etc/mkinitcpio.conf -g /boot/initramfs-linux.img
</span><span class='line'>==&gt; Starting build: 4.4.3-1-ARCH
</span><span class='line'>  -&gt; Running build hook: [base]
</span><span class='line'>  -&gt; Running build hook: [udev]
</span><span class='line'>  -&gt; Running build hook: [autodetect]
</span><span class='line'>  -&gt; Running build hook: [modconf]
</span><span class='line'>  -&gt; Running build hook: [block]
</span><span class='line'>  -&gt; Running build hook: [filesystems]
</span><span class='line'>  -&gt; Running build hook: [keyboard]
</span><span class='line'>  -&gt; Running build hook: [fsck]
</span><span class='line'>==&gt; Generating module dependencies
</span><span class='line'>==&gt; Creating gzip-compressed initcpio image: /boot/initramfs-linux.img
</span><span class='line'>==&gt; Image generation successful
</span><span class='line'>==&gt; Building image from preset: /etc/mkinitcpio.d/linux.preset: 'fallback'
</span><span class='line'>  -&gt; -k /boot/vmlinuz-linux -c /etc/mkinitcpio.conf -g /boot/initramfs-linux-fallback.img -S autodetect
</span><span class='line'>==&gt; Starting build: 4.4.3-1-ARCH
</span><span class='line'>  -&gt; Running build hook: [base]
</span><span class='line'>  -&gt; Running build hook: [udev]
</span><span class='line'>  -&gt; Running build hook: [modconf]
</span><span class='line'>  -&gt; Running build hook: [block]
</span><span class='line'>==&gt; WARNING: Possibly missing firmware for module: wd719x
</span><span class='line'>==&gt; WARNING: Possibly missing firmware for module: aic94xx
</span><span class='line'>  -&gt; Running build hook: [filesystems]
</span><span class='line'>  -&gt; Running build hook: [keyboard]
</span><span class='line'>  -&gt; Running build hook: [fsck]
</span><span class='line'>==&gt; Generating module dependencies
</span><span class='line'>==&gt; Creating gzip-compressed initcpio image: /boot/initramfs-linux-fallback.img
</span><span class='line'>==&gt; Image generation successful</span></code></pre></td></tr></table></div></figure>


<p>So far, everything seems to be OK, but it still doesn&rsquo;t work. FAILED!</p>

<h3>2nd shot</h3>

<p>In Shared Folders with vmhgfs-fuse utility section, there is an alternative way to mount the shared folders:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># vmhgfs-fuse -o allow_other -o auto_unmount .host:/&lt;shared_folder&gt; &lt;shared folders root directory&gt;</span></code></pre></td></tr></table></div></figure>


<p>Rule for each shared folder in fstab:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>.host:/&lt;shared_folder&gt; /home/user1/shares fuse.vmhgfs-fuse defaults 0 0</span></code></pre></td></tr></table></div></figure>


<p>I tried the command line to mount the folder manually first, and it worked for me, so I believe the fstab rule shold also work. So made change to fstab like below:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>.host:/Documents /home/wanglij/Documents vmhgfs  defaults,uid=1000,dmask=022,fmask=022,user  0 0
</span><span class='line'>==&gt;
</span><span class='line'>.host:/Documents  /home/wanglij/Documents fuse.vmhgfs-fuse    defaults,uid=1000,umask=022     0 0</span></code></pre></td></tr></table></div></figure>


<p>Note that the options of vmghfs-fuse are bit different from the options of vmhgfs.</p>

<p>Afer this change, now we can have system started with the shared folders mounted again. But I cannot access these shared folders.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ls -l
</span><span class='line'>ls: cannot access 'Documents': Permission denied
</span><span class='line'>ls: cannot access 'P4': Permission denied
</span><span class='line'>ls: cannot access 'workspace': Permission denied
</span><span class='line'>ls: cannot access 'Downloads': Permission denied
</span><span class='line'>total 68
</span><span class='line'>drwxr-xr-x  3 wanglij root  4096 Aug 18  2015 Desktop
</span><span class='line'>d?????????  ? ?       ?        ?            ? Documents
</span><span class='line'>d?????????  ? ?       ?        ?            ? Downloads
</span><span class='line'>d?????????  ? ?       ?        ?            ? P4
</span><span class='line'>drwxr-xr-x  2 wanglij root  4096 Jan 27 22:14 bin
</span><span class='line'>drwxr-xr-x  7 wanglij root  4096 Mar  9 15:29 lab
</span><span class='line'>drwxr-xr-x 16 wanglij root  4096 Jan 15 20:24 octopress
</span><span class='line'>drwx------  4 wanglij root 24576 Apr  6  2015 oldDownloads
</span><span class='line'>drwxr-xr-x  3 wanglij root  4096 Jul 30  2014 qemu
</span><span class='line'>drwxr-xr-x  2 wanglij root  4096 Feb 26  2015 sdb1
</span><span class='line'>drwxr-xr-x  3 wanglij root  4096 Dec  2 22:45 test
</span><span class='line'>drwxr-xr-x 11 wanglij root  4096 Feb  4 18:53 tmp
</span><span class='line'>drwxr-xr-x  3 wanglij root  4096 Jan 26 22:52 toolchain
</span><span class='line'>d?????????  ? ?       ?        ?            ? workspace</span></code></pre></td></tr></table></div></figure>


<p>Then I found if I login as root user, then I am able to asscess these folders. After googling, it turns out this is by design in fuse as a security measure. So eventually, change the fstab rule like below:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>.host:/Documents    /home/wanglij/Documents fuse.vmhgfs-fuse    defaults,uid=1000,umask=022,allow_other 0 0</span></code></pre></td></tr></table></div></figure>


<p>And finally, it worked. SUCCEEDED!</p>

<h3>References</h3>

<ol>
<li><a href="https://wiki.archlinux.org/index.php/VMware/Installing_Arch_as_a_guest#Shared_Folders_with_vmhgfs-fuse_utility">https://wiki.archlinux.org/index.php/VMware/Installing_Arch_as_a_guest#Shared_Folders_with_vmhgfs-fuse_utility</a><br></li>
<li><a href="http://serverfault.com/questions/188894/denied-root-access-to-user-mounted-fuse-file-system">http://serverfault.com/questions/188894/denied-root-access-to-user-mounted-fuse-file-system</a><br></li>
<li><a href="http://purplepalmdash.github.io/blog/2014/07/30/zai-githubshang-bu-shu-ni-de-octopressbo-ke/">http://purplepalmdash.github.io/blog/2014/07/30/zai-githubshang-bu-shu-ni-de-octopressbo-ke/</a><br></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pacman: The Requested URL Returned Error: 404]]></title>
    <link href="http://wanglij.github.io/blog/2016/03/08/pacman-the-requested-url-returned-error-404/"/>
    <updated>2016-03-08T23:02:02+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/03/08/pacman-the-requested-url-returned-error-404</id>
    <content type="html"><![CDATA[<p>pacman always gives the error &ldquo;The requested URL returned error: 404&rdquo;.
The problem was resolved by running</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pacman -Syy</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[童言无忌]]></title>
    <link href="http://wanglij.github.io/blog/2016/02/23/funny-moments-with-kids/"/>
    <updated>2016-02-23T16:27:28+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/02/23/funny-moments-with-kids</id>
    <content type="html"><![CDATA[<p>最近多次被两、三岁小孩子的语言雷到，趁着还新鲜写在这里，留作以后美好的记忆，也顺便记下从中学到的点滴。</p>

<h3>儿子的数字</h3>

<p>一天晚上，儿子在地上玩小球。<br>
我说：“咱们来数数这些小球吧”。<br>
儿子开始用中文数总是跳过“三、四”。<br>
然后，我开始引导他用英文数。<br>
他开始数了：
one, two, three, &hellip;, nine, ten。<br>
我说“哇，好棒！”<br>
然后他继续数：
eleven, twenteen, &hellip;(没听清), cookie-teen, cracker-teen.</p>

<h3>你是狗</h3>

<p>周五晚上轮到我带AWANA的puggles(2-3岁的小孩)班。儿子也刚好在这个班。<br>
游戏时间，我和孩子们一起用积木在墙角围出了一个小城堡。
孩子们也把我邀请进去蹲坐在里边。<br>
两个小女孩见此情景来了灵感，开始玩起了角色扮演。<br>
女孩X指着自己说“我是妹妹”指着儿子说“他是爸爸”<br>
女孩L跟着说“我是妈妈，他是爸爸”然后兴高采烈地指着我说“你是狗”<br>
我一脸茫然“啊！我怎么是狗啊？”</p>

<h3>爸爸的奶</h3>

<p>周六的下午，老婆去教会上课了，我带两个孩子在家。<br>
老大玩的正起劲，老二睡醒了。<br>
我对老大说：“咱们带着弟弟去找妈妈吧，现在弟弟太小了，只能吃妈妈的奶，等弟弟大了就不用了。”<br>
老大好像听懂了：“哦，好吧，等弟弟大了就可以吃爸爸的奶了！“<br>
“Ugh”</p>

<h3>种鸟</h3>

<p>早上，老婆又说起了种菜的事情。<br>
太太说：“其实自己想种点什么，到超市买种子就行”。<br>
我有些不耐烦了：“别种了，种个鸟啊！”<br>
这时儿子插进来“爸爸，鸟不能种，鸟是在天上飞的。”<br>
：) ： “对对对，爸爸错了。”</p>

<h3>小孩子的样式</h3>

<p>有时候会不由自主地想起当时的场景，仍然禁不住开心的笑。但笑过之后，不免让我想起了《圣经》的福音书中多处提到过“小孩子”：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>马太福音 18:2    耶稣便叫一个小孩子来，使他站在他们当中，
</span><span class='line'>          3   说：“我实在告诉你们：你们若不回转，变成小孩子的样式，断不得进天国。
</span><span class='line'>马太福音 19:14    耶稣说：“让小孩子到我这里来，不要禁止他们，因为在天国的正是这样的人。”
</span><span class='line'>马可福音 10:14    耶稣看见就恼怒，对门徒说：“让小孩子到我这里来，不要禁止他们，因为在神国的正是这样的人。
</span><span class='line'>          15  我实在告诉你们：凡要承受神国的，若不像小孩子，断不能进去。”
</span><span class='line'>路加福音 18:16    耶稣却叫他们来，说：“让小孩子到我这里来，不要禁止他们，因为在神国的正是这样的人。
</span><span class='line'>          17  我实在告诉你们：凡要承受神国的，若不像小孩子，断不能进去。”</span></code></pre></td></tr></table></div></figure>


<p>这些经节记录了耶稣教训门徒时提到：“若不像小孩子”，断不能进神国。这些无忌的童言仿佛让我明白了一点点耶稣所说的“小孩子的样式”是什么意思。</p>

<p>当一个人指着你说“你是狗”的时候，我想多数人都会觉得这是在骂人。可是，为什么同样的话从那个小女孩嘴里说出来，“被骂的”我没有感到半点的不舒服，反而觉得那么开心，而给别人听了也只是觉得非常好笑而已。
我想是因为她的心里显然没存有半点骂人的意思，而恰恰相反是充满着善意地把我归入了他们的玩伴。
最后一个例子，则是我这个言者有意在尖酸刻薄，只是被小孩子听到并无领会，更不晓得这语言有不文明之处，反而用他善意的理解来帮我纠正他认为的客观错误，另我笑过之后自感羞愧、顿时醒悟。
如果说“你是狗”是言者无意，那么&#8221;鸟不能种&#8221;则是听着无心。言者无意和听者无心恐怕只有的内心尚且纯净能做到。</p>

<p>我们语言世界里源源不断地有各样新的词汇被创造，同时还有旧有的词汇常常被我们赋予新的含义，有的词语甚至已和它原来的意思大相径庭。
不论是新词还是旧词新意都是根据我们的需要应允而生的。
狗本来是人类最好的朋友而并无贬义，只是因为我们心里有了尊卑，狗就被我们变成了贬损骂人的名次。天上飞的鸟不但为我们带来美妙的鸣叫声，也让这空荡荡的天空因为有它们而显得生机勃勃，却也被人误用。
狗没有错，鸟也没有错，只是当它们在我们的言语中被赋予了让人不适的含义。
或直接或婉转，我们的语言中有这些不堪的词语大行其道，不正是我们世人口舌之罪的结果吗？</p>

<p>除了词汇，我们还常常穷尽我们的聪明智慧运用各种的技巧，经常让我们说出的话或写出的文字显得华丽惊艳与众不同。
记得曾经看到过一段话说：当一个男人看见一位美女，如果他对她说“我想和你睡觉”，那么这个人是个流氓，如果他对她说“我，想和你一起醒来”，那么这个人是徐志摩。
我想说，这里徐志摩和流氓并无本质的区别，只是徐志摩更会使用看似华丽的语言来遮羞而已。
<span style="background-color:yellow">创世纪 2：25 当时夫妻二人赤身露体，并不羞耻。</span>这里所说的赤身露体不仅仅是身体上赤裸，更是心灵上的相通没有遮掩。
无论我们用什么样的语言，都改变不了我们无法让彼此的灵魂赤裸展露的事实，<span style="background-color:yellow">因为世人都犯了罪，亏缺了神的荣耀 （罗马书 3:23）</span>。
当我们彼此展露灵魂深处是，我们的罪让我们彼此感到羞耻。</p>

<p>小孩子没有遮掩地说“你是狗”，因为在她的世界里这不是咒骂。 小孩子尚且纯净的内心重新让鸟儿飞上了天空，而不是朽烂在地里。
有一天，这些小孩子们终将慢慢地长大。到那时，他们不在是小孩子了，真希望他们能一直拥有小孩子的样式，而<span style="background-color:yellow">不要效法这个世界</span>。
也希望我们真的都能<span style="background-color:yellow">回转，变成小孩子的样式</span>，以至于<span style="background-color:yellow">赤身露体，并不羞愧</span>。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>罗马书 12:2   不要效法这个世界，只要心意更新而变化，叫你们察验何为神的善良、纯全、可喜悦的旨意。</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install Arm-none-linux-gnueabi-gcc]]></title>
    <link href="http://wanglij.github.io/blog/2016/01/26/install-arm-none-linux-gnueabi-gcc/"/>
    <updated>2016-01-26T22:21:43+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/01/26/install-arm-none-linux-gnueabi-gcc</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Behind Company's Firewall]]></title>
    <link href="http://wanglij.github.io/blog/2016/01/15/behind-companys-firewall/"/>
    <updated>2016-01-15T17:33:46+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/01/15/behind-companys-firewall</id>
    <content type="html"><![CDATA[<h3>RubyGem</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem command [arguments...] [options...] --http-proxy http://username:password@company.proxy.address:port</span></code></pre></td></tr></table></div></figure>


<p>or</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export HTTP_PROXY=http://username:password@company.proxy.address:port</span></code></pre></td></tr></table></div></figure>


<h3>Proxy settings for ArchLinux</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> export http_proxy=$HTTP_PROXY
</span><span class='line'> export https_proxy=$http_proxy
</span><span class='line'> export ftp_proxy=$http_proxy
</span><span class='line'> export rsync_proxy=$http_proxy</span></code></pre></td></tr></table></div></figure>


<p>At least, after doing this, I can deploy my octopress log again by running rake deploy.</p>

<h3>pacman</h3>

<p>Make sure that the relevant environment variables ($http_proxy, $ftp_proxy etc.) are set up. Should this not work, you may need to configure pacman to use wget to fetch packages. If you use pacman with sudo, you need to configure sudo to pass these environment variables to pacman.</p>

<p>o have pacman automatically use Wget and a proxy with authentication, place the Wget command into /etc/pacman.conf, in the [options] section:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>XferCommand = /usr/bin/wget --proxy-user "domain\user" --proxy-password="password" --passive-ftp -q --show-progress -c -O %o %u</span></code></pre></td></tr></table></div></figure>


<p>If you have a lot of environment variables, or you export your proxy settings via export http_proxy=&ldquo;&hellip;&rdquo;, when using sudo these variables do not get passed to the root account unless you run sudo with the -E option.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo -E pacman -Syu</span></code></pre></td></tr></table></div></figure>


<p>The recommended way of preserving environment variables is to append them to env_keep:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/etc/sudoers
</span><span class='line'>Defaults env_keep += "ftp_proxy http_proxy https_proxy no_proxy"</span></code></pre></td></tr></table></div></figure>


<h3>yaourt</h3>

<p>It gives the following error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>symbol lookup error: /usr/lib/libcurl.so.4: undefined symbol: SSL_CTX_set_alpn_protos</span></code></pre></td></tr></table></div></figure>


<p>This was resolved by reinstall openssl</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pacman -S --force openssl</span></code></pre></td></tr></table></div></figure>


<p>Then it gives the another error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl error: Peer certificate cannot be authenticated with given CA certificates</span></code></pre></td></tr></table></div></figure>


<p>Pass &ldquo;&ndash;insecure&rdquo; option to yaourt.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  -&gt; Cloning binutils-gdb git repo...
</span><span class='line'>Cloning into bare repository '/tmp/yaourt-tmp-wanglij/aur-arm-linux-gnueabihf-binutils/binutils-gdb'...
</span><span class='line'>fatal: unable to connect to sourceware.org:
</span><span class='line'>sourceware.org[0: 209.132.180.131]: errno=Connection refused
</span><span class='line'>
</span><span class='line'>==&gt; ERROR: Failure while downloading binutils-gdb git repo
</span><span class='line'>    Aborting...
</span><span class='line'>==&gt; ERROR: Makepkg was unable to build arm-linux-gnueabihf-binutils.
</span><span class='line'>==&gt; Restart building arm-linux-gnueabihf-binutils ? [y/N]</span></code></pre></td></tr></table></div></figure>


<h3>References</h3>

<p><a href="http://stackoverflow.com/questions/4418/how-do-i-update-ruby-gems-from-behind-a-proxy-isa-ntlm">http://stackoverflow.com/questions/4418/how-do-i-update-ruby-gems-from-behind-a-proxy-isa-ntlm</a>
<a href="https://wiki.archlinux.org/index.php/proxy_settings">https://wiki.archlinux.org/index.php/proxy_settings</a>
<a href="https://wiki.archlinux.org/index.php/Wget#pacman_integration">https://wiki.archlinux.org/index.php/Wget#pacman_integration</a>
<a href="https://wiki.archlinux.org/index.php/pacman#pacman_does_not_honor_proxy_settings">https://wiki.archlinux.org/index.php/pacman#pacman_does_not_honor_proxy_settings</a>
<a href="https://bbs.archlinux.org/viewtopic.php?pid=1523915#p1523915">https://bbs.archlinux.org/viewtopic.php?pid=1523915#p1523915</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[VNC Over SSH Tunnel]]></title>
    <link href="http://wanglij.github.io/blog/2016/01/14/vnc-over-ssh-tunnel/"/>
    <updated>2016-01-14T20:48:20+00:00</updated>
    <id>http://wanglij.github.io/blog/2016/01/14/vnc-over-ssh-tunnel</id>
    <content type="html"><![CDATA[<h3>Precondition:</h3>

<p>TigerVNC was installed and running in my Arch Linux virtual box.
I have TightVNC viewer installed in my local Windows computer.
PuTTY is installed in the Windows computer.</p>

<h3>Issue:</h3>

<p>I could be able to connect to my VNC server directly before,
but recent it seems like the port number was blocked by my company network,
so I got the following error whenever I tried to connect to my Linux VNC server.</p>

<p>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;<br>
192.168.91.100::5901 - TightVNC Viewer<br>
&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;<br>
Error in TightVNC Viewer: An attempt was made to access a socket in a way forbidden by its access permissions.<br>
&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;<br>
OK   <br>
&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;<br></p>

<h3>Solution: connect VNC over SSH tunnel</h3>

<h4>On the server (optional)</h4>

<p>Edit /etc/systemd/system/vncserver@:1.service, and change the following line</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ExecStart=/usr/bin/vncserver -geometry 1920x1080 -fg -alwaysshared -dpi 100 %i</span></code></pre></td></tr></table></div></figure>


<p>to</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ExecStart=/usr/bin/vncserver -geometry 1920x1080 -fg -alwaysshared -dpi 100 -localhost %i</span></code></pre></td></tr></table></div></figure>


<p>By doing this change, it will only allow connections from the localhost. This is why it is optional.</p>

<h4>On the windows client</h4>

<p>Run PuTTY.</p>

<ul>
<li>Fill &ldquo;Host Name (or IP address):&rdquo; field with &ldquo;<user>@<host>&rdquo;. Here the host is the IP address of my Linux machine where the VNC server is running. In my case, it&rsquo;s 192.168.91.100.<br></li>
<li><p>Make sure &ldquo;SSH&rdquo; is selected in &ldquo;Connection Type:&rdquo;.<br>
Go to the &ldquo;Connection&rdquo; -> &ldquo;SSH&rdquo; -> &ldquo;Tunnels&rdquo; screen.<br>
Under &ldquo;Ad new forwarded port:&rdquo;,</p></li>
<li><p>Enter 5901 for the &ldquo;Source port&rdquo; field.</p></li>
<li>Enter &ldquo;127.0.0.1:5901&rdquo;.</li>
<li>Click the &ldquo;Add&rdquo; button. (You should se a line in the text box that reads &ldquo;L5901 127.0.0.1:5901&rdquo;)</li>
</ul>


<p>Go back to the &ldquo;Session&rdquo; screen, enter a name for the session and save it.
Now open the connection, and enter the password when prompted.</p>

<p>Run TightVNC.
Change the &ldquo;Remote Host:&rdquo; field to 127.0.0.1::5901, and connect to the VNC like before.</p>

<h3>References</h3>

<ol>
<li><a href="https://wiki.archlinux.org/index.php/TigerVNC">https://wiki.archlinux.org/index.php/TigerVNC</a></li>
<li><a href="https://www.ocf.berkeley.edu/~xuanluo/sshproxywin.html">How to tunnel Internet traffic over SSH in Windows</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[路加福音 5 (Study Notes)]]></title>
    <link href="http://wanglij.github.io/blog/2015/08/28/luke-5-study-notes/"/>
    <updated>2015-08-28T02:00:55+00:00</updated>
    <id>http://wanglij.github.io/blog/2015/08/28/luke-5-study-notes</id>
    <content type="html"><![CDATA[<h2>在革尼撒勒湖边教训人</h2>

<p><span style="background-color:yellow">
1 耶稣站在<strong>革尼撒勒湖</strong>边，<br>
众人拥挤他，要听神的道。 <br>
2 他见有<strong>两</strong>只船湾在湖边，打鱼的人却离开船洗网去了。 <br>
3 有一只船是<strong>西门</strong>的，耶稣就上去，请他把船撑开，<br>
稍微离岸，就坐下，从船上<strong>教训众人</strong>。
</span></p>

<h4>Cross references, Questions and Notes</h4>

<ol>
<li>耶稣为什么上西门的船？<br>
是不是拣选西门彼得的一种方式</li>
</ol>


<h2>打鱼的将来得人</h2>

<p><span style="background-color:yellow">
4 讲完了，对西门说：<br>
<strong>“把船开到水深之处，下网打鱼。” </strong><br>
5 西门说：<br>
<strong>“夫子，我们整夜劳力，并没有打着什么，</strong><br>
<strong>但依从你的话，我就下网。”</strong> <br>
6 他们下了网，就圈住许多鱼，网险些裂开，<br>
7 便招呼那只船上的同伴来帮助。<br>
他们就来，把鱼装满了两只船，甚至船要沉下去。<br>
8 西门彼得看见，就俯伏在耶稣膝前，<br>
说：<strong>“主啊！离开我，我是个罪人！”</strong> <br>
9 他和一切同在的人都<strong>惊讶这一网所打的鱼</strong>。 <br>
10 他的伙伴西庇太的儿子<strong>雅各</strong>、<strong>约翰</strong>也是这样。<br>
耶稣对西门说：<strong>“不要怕，从今以后你要得人了。”</strong> <br>
11 他们把两只船拢了岸，就撇下所有的，跟从了耶稣。<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<ol>
<li><p>教训众人都讲了些什么呢？<br>
马太福音13：1-52<br>
撒种的比喻、稗子的比喻、芥菜种的比喻、面酵的比喻、藏宝于田与寻珠的比喻、撒网的比喻</p></li>
<li><p>西门彼得的职业是什么？耶稣从事什么职业？<br>
西门整夜都没打到鱼，为什么还依从耶稣？<br>
读了本节经文有何体会？</p></li>
</ol>


<p>马太福音 4</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>18 耶稣在加利利海边行走，看见弟兄二人，就是那称呼彼得的西门和他兄弟安得烈，在海里撒网，他们本是打鱼的。 
</span><span class='line'>19 耶稣对他们说：“来跟从我，我要叫你们得人如得鱼一样。” 
</span><span class='line'>20 他们就立刻舍了网，跟从了他。 
</span><span class='line'>21 从那里往前走，又看见弟兄二人，就是西庇太的儿子雅各和他兄弟约翰，同他们的父亲西庇太在船上补网，耶稣就招呼他们。 
</span><span class='line'>22 他们立刻舍了船，别了父亲，跟从了耶稣。</span></code></pre></td></tr></table></div></figure>


<p>马可福音 1</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>16 耶稣顺着加利利的海边走，看见西门和西门的兄弟安得烈在海里撒网，他们本是打鱼的。 
</span><span class='line'>17 耶稣对他们说：“来跟从我，我要叫你们得人如得鱼一样。” 
</span><span class='line'>18 他们就立刻舍了网，跟从了他。 
</span><span class='line'>19 耶稣稍往前走，又见西庇太的儿子雅各和雅各的兄弟约翰在船上补网， 
</span><span class='line'>20 耶稣随即招呼他们。他们就把父亲西庇太和雇工人留在船上，跟从耶稣去了。</span></code></pre></td></tr></table></div></figure>


<p>马可福音与路加福音对几件事叙述的顺序有所不同： <br>
马可福音: 召第一批（四个）门徒 &ndash;> 在迦百农赶逐污鬼 &ndash;> 医西门岳母<br>
路加福音: 在迦百农赶逐污鬼 &ndash;> 医西门岳母 &ndash;> 在革尼撒勒湖边教训人并召第一批（四个）门徒 <br>
那么事情的发展到底是怎样的顺序呢？</p>

<h2>耶稣洁净长大麻风的</h2>

<p><span style="background-color:yellow">
12 有一回，耶稣在一个城里，<br>
有人满身长了大麻风，看见他，就俯伏在地，<br>
求他说：“主若肯，必能叫我洁净了。” <br>
13 耶稣伸手<strong>摸</strong>他，<br>
说：<strong>“我肯，你洁净了吧！”</strong><br>
<strong>大麻风立刻就离了他的身。 </strong><br>
14 耶稣嘱咐他：<br>
<strong>“你切不可告诉人，只要去把身体给祭司察看，</strong><br>
<strong>又要为你得了洁净，照摩西所吩咐的献上礼物，</strong><br>
<strong>对众人做证据。” </strong><br>
15 但耶稣的名声越发传扬出去，<br>
有极多的人聚集来听道，<br>
也指望医治他们的病。 <br>
16 <strong>耶稣却退到旷野去祷告。</strong><br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>马可福音 01</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>40 有一个长大麻风的来求耶稣，向他跪下，说：“你若肯，必能叫我洁净了。” 
</span><span class='line'>41 耶稣动了慈心，就伸手摸他，说：“我肯，你洁净了吧！” 
</span><span class='line'>42 大麻风即时离开他，他就洁净了。 
</span><span class='line'>43 耶稣严严地嘱咐他，就打发他走， 
</span><span class='line'>44 对他说：“你要谨慎，什么话都不可告诉人，只要去把身体给祭司察看，又因为你洁净了，献上摩西所吩咐的礼物，对众人做证据。” 
</span><span class='line'>45 那人出去，倒说许多的话，把这件事传扬开了，叫耶稣以后不得再明明地进城，只好在外边旷野地方。人从各处都就了他来。</span></code></pre></td></tr></table></div></figure>


<p>为什么“切不可告诉人”？如何看待人的见证？<br>
答案就在45节和下面的经文<br>
约翰福音2：23-25，6：14-15</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>23 当耶稣在耶路撒冷过逾越节的时候，有许多人看见他所行的神迹，就信了他的名。 
</span><span class='line'>24 耶稣却不将自己交托他们，因为他知道万人， 
</span><span class='line'>25 也用不着谁见证人怎样，因他知道人心里所存的。
</span><span class='line'>
</span><span class='line'>14 众人看见耶稣所行的神迹，就说：“这真是那要到世间来的先知！”
</span><span class='line'>15 耶稣既知道众人要来强逼他做王，就独自又退到山上去了。</span></code></pre></td></tr></table></div></figure>


<p>为什么&#8221;要去把身体给祭司察看&#8221;？“照摩西所吩咐的献上礼物”的根据又是什么？<br>
利未记 13-14</p>

<h2>医治瘫子</h2>

<p><span style="background-color:yellow">
17 有一天，耶稣教训人，<br>
有<strong>法利赛人</strong>和<strong>教法师</strong>在旁边坐着，<br>
他们是<strong>从加利利各乡村</strong>和<strong>犹太</strong>并<strong>耶路撒冷</strong>来的。<br>
主的能力与耶稣同在，使他能医治病人。 <br>
18 有人用褥子抬着一个瘫子，要抬进去放在耶稣面前， <br>
19 却因人多，寻不出法子抬进去，<br>
就<strong>上了房顶</strong>，从瓦间把他连褥子缒到当中，正在耶稣面前。 <br>
20 耶稣见他们的<strong>信心</strong>，<br>
就对瘫子说：<strong>“你的罪赦了！”</strong> <br>
21 文士和法利赛人就议论说：<br>
“这说僭妄话的是谁？<br>
除了神以外，谁能赦罪呢？” <br>
22 耶稣知道他们所议论的，就说：<br>
<strong>“你们心里议论的是什么呢？</strong> <br>
23 <strong>或说‘你的罪赦了’，或说‘你起来行走’，哪一样容易呢？ </strong><br>
24 <strong>但要叫你们知道，人子在地上有赦罪的权柄。”</strong><br>
就对瘫子说：<strong>“我吩咐你，起来，拿你的褥子回家去吧！”</strong> <br>
25 那人当众人面前<strong>立刻起来</strong>，拿着他所躺卧的褥子回家去，<strong>归荣耀于神</strong>。 <br>
26 众人都<strong>惊奇</strong>，也<strong>归荣耀于神</strong>，<br>
并且<strong>满心惧怕</strong>，说：“我们今日看见非常的事了！”<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>马太福音 9</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1 耶稣上了船，渡过海，来到自己的城里。 
</span><span class='line'>2 有人用褥子抬着一个瘫子到耶稣跟前来。耶稣见他们的信心，就对瘫子说：“小子，放心吧，你的罪赦了！” 
</span><span class='line'>3 有几个文士心里说：“这个人说僭妄的话了！” 
</span><span class='line'>4 耶稣知道他们的心意，就说：“你们为什么心里怀着恶念呢？ 
</span><span class='line'>5 或说‘你的罪赦了’，或说‘你起来行走’，哪一样容易呢？ 
</span><span class='line'>6 但要叫你们知道，人子在地上有赦罪的权柄。”就对瘫子说：“起来，拿你的褥子回家去吧！” 
</span><span class='line'>7 那人就起来，回家去了。 
</span><span class='line'>8 众人看见都惊奇，就归荣耀于神，因为他将这样的权柄赐给人。</span></code></pre></td></tr></table></div></figure>


<p>马可福音 2</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1 过了些日子，耶稣又进了迦百农。人听见他在房子里， 
</span><span class='line'>2 就有许多人聚集，甚至连门前都没有空地。耶稣就对他们讲道。 
</span><span class='line'>3 有人带着一个瘫子来见耶稣，是用四个人抬来的。 
</span><span class='line'>4 因为人多，不得近前，就把耶稣所在的房子拆了房顶。既拆通了，就把瘫子连所躺卧的褥子都缒下来。 
</span><span class='line'>5 耶稣见他们的信心，就对瘫子说：“小子，你的罪赦了！” 
</span><span class='line'>6 有几个文士坐在那里，心里议论说： 
</span><span class='line'>7 “这个人为什么这样说呢？他说僭妄的话了！除了神以外，谁能赦罪呢？” 
</span><span class='line'>8 耶稣心中知道他们心里这样议论，就说：“你们心里为什么这样议论呢？ 
</span><span class='line'>9 或对瘫子说‘你的罪赦了’，或说‘起来，拿你的褥子行走’，哪一样容易呢？ 
</span><span class='line'>10 但要叫你们知道，人子在地上有赦罪的权柄。”就对瘫子说： 
</span><span class='line'>11 “我吩咐你，起来，拿你的褥子回家去吧！” 
</span><span class='line'>12 那人就起来，立刻拿着褥子，当众人面前出去了。以致众人都惊奇，归荣耀于神，说：“我们从来没有见过这样的事！”</span></code></pre></td></tr></table></div></figure>


<p>v17法利赛人和教法师来自那些地方？
从加利利各乡村，犹太，耶路撒冷。说明他们从以色列的各地聚集而来。</p>

<p>v20-24 耶稣用这样一种方式告诉众人他是神，人子的权柄就等于神的权柄</p>

<p>从上面的两个故事，我们看到长大麻风的人和摊子共同点就是他们的信心，他们主动地来到耶稣面前，求得耶稣的医治。</p>

<p>由此引申出应用问题：
人若不求别人的原谅，会不会得到人的原谅？
神有赦罪的恩典，但是人若不痛悔自己的过犯求得神，能不能得到这个恩典呢？<br>
大卫认罪悔改求神赦免的诗：诗篇51</p>

<p>约翰福音9：39-41</p>

<h2>利未被召</h2>

<p><span style="background-color:yellow">
27 这事以后，耶稣出去，看见一个<strong>税吏</strong>，名叫<strong>利未</strong>，<br>
坐在税关上，就对他说：<strong>“你跟从我来！”</strong><br>
28 他就<strong>撇下所有的，起来跟从了耶稣。</strong> <br>
29 利未在自己家里<strong>为耶稣大摆筵席，</strong><br>
有许多税吏和别人与他们一同坐席。<br>
30 法利赛人和文士就<strong>向耶稣的门徒发怨言</strong>说：<br>
“你们为什么和税吏并罪人一同吃喝呢？” <br>
31 耶稣对他们说：<br>
<strong>“无病的人用不着医生，</strong><br>
<strong>有病的人才用得着。</strong> <br>
32 <strong>我来本不是召义人悔改，</strong><br>
<strong>乃是召罪人悔改。”</strong><br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<p>利未就是马太<br>
马太福音9</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>9 耶稣从那里往前走，看见一个人，名叫马太，坐在税关上，就对他说：“你跟从我来！”他就起来跟从了耶稣。
</span><span class='line'>10 耶稣在屋里坐席的时候，有好些税吏和罪人来，与耶稣和他的门徒一同坐席。 
</span><span class='line'>11 法利赛人看见，就对耶稣的门徒说：“你们的先生为什么和税吏并罪人一同吃饭呢？” 
</span><span class='line'>12 耶稣听见就说：“康健的人用不着医生，有病的人才用得着。 
</span><span class='line'>13 经上说：‘我喜爱怜恤，不喜爱祭祀’，这句话的意思你们且去揣摩；我来本不是召义人，乃是召罪人。”</span></code></pre></td></tr></table></div></figure>


<p>马可福音 2</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>13 耶稣又出到海边去，众人都就了他来，他便教训他们。 
</span><span class='line'>14 耶稣经过的时候，看见亚勒腓的儿子利未坐在税关上，就对他说：“你跟从我来！”他就起来跟从了耶稣。 
</span><span class='line'>15 耶稣在利未家里坐席的时候，有好些税吏和罪人与耶稣并门徒一同坐席，因为这样的人多，他们也跟随耶稣。 
</span><span class='line'>16 法利赛人中的文士[a]看见耶稣和罪人并税吏一同吃饭，就对他门徒说：“他和税吏并罪人一同吃喝吗？” 
</span><span class='line'>17 耶稣听见，就对他们说：“康健的人用不着医生，有病的人才用得着。我来本不是召义人，乃是召罪人。”</span></code></pre></td></tr></table></div></figure>


<p>路加福音3提到过一个税吏，不知道是不是就是这个利未
12 又有税吏来要受洗，问他说：“夫子，我们当做什么呢？”
13 约翰说：“除了例定的数目，不要多取。”</p>

<p>v31-32 两种人不用悔改：义人和自以为义的人。</p>

<h2>论禁食</h2>

<p><span style="background-color:yellow">
33 他们说：<br>
“约翰的门徒屡次禁食、祈祷，<br>
法利赛人的门徒也是这样，<br>
唯独你的门徒又吃又喝。” <br>
34 耶稣对他们说：<br>
<strong>“新郎和陪伴之人同在的时候，</strong><br>
<strong>岂能叫陪伴之人禁食呢？</strong> <br>
35 <strong>但日子将到，新郎要离开他们，那日他们就要禁食了。”</strong><br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<ol>
<li>其他福音书中的相关叙述</li>
</ol>


<p>马太福音9</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>14 那时，约翰的门徒来见耶稣，说：“我们和法利赛人常常禁食，你的门徒倒不禁食，这是为什么呢？” 
</span><span class='line'>15 耶稣对他们说：“新郎和陪伴之人同在的时候，陪伴之人岂能哀恸呢？但日子将到，新郎要离开他们，那时候他们就要禁食。 </span></code></pre></td></tr></table></div></figure>


<p>马可福音 2</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>18 当下，约翰的门徒和法利赛人禁食。他们来问耶稣说：“约翰的门徒和法利赛人的门徒禁食，你的门徒倒不禁食，这是为什么呢？” 
</span><span class='line'>19 耶稣对他们说：“新郎和陪伴之人同在的时候，陪伴之人岂能禁食呢？新郎还同在，他们不能禁食。 
</span><span class='line'>20 但日子将到，新郎要离开他们，那日他们就要禁食。</span></code></pre></td></tr></table></div></figure>


<ol>
<li>关于禁食的经文</li>
</ol>


<p>以赛亚书 58</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>3 “他们说：‘我们禁食，你为何不看见呢？我们刻苦己心，你为何不理会呢？’看哪，你们禁食的日子仍求利益，勒逼人为你们做苦工。 
</span><span class='line'>4 你们禁食，却互相争竞，以凶恶的拳头打人。你们今日禁食，不得使你们的声音听闻于上。 
</span><span class='line'>5 这样禁食，岂是我所拣选，使人刻苦己心的日子吗？岂是叫人垂头像苇子，用麻布和炉灰铺在他以下吗？你这可称为禁食，为耶和华所悦纳的日子吗？ 
</span><span class='line'>6 我所拣选的禁食，不是要松开凶恶的绳，解下轭上的索，使被欺压的得自由，折断一切的轭吗？ 
</span><span class='line'>7 不是要把你的饼分给饥饿的人，将漂流的穷人接到你家中，见赤身的给他衣服遮体，顾恤自己的骨肉而不掩藏吗？ 
</span><span class='line'>8 这样，你的光就必发现如早晨的光，你所得的医治要速速发明，你的公义必在你前面行，耶和华的荣光必做你的后盾。 
</span><span class='line'>9 那时你求告，耶和华必应允；你呼求，他必说：‘我在这里！’
</span><span class='line'>
</span><span class='line'>“你若从你中间除掉重轭和指摘人的指头，并发恶言的事， 
</span><span class='line'>10 你心若向饥饿的人发怜悯，使困苦的人得满足，你的光就必在黑暗中发现，你的幽暗必变如正午。 
</span><span class='line'>11 耶和华也必时常引导你，在干旱之地使你心满意足，骨头强壮。你必像浇灌的园子，又像水流不绝的泉源。</span></code></pre></td></tr></table></div></figure>


<p>撒迦利亚书 7</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1 大流士王第四年九月，就是基斯流月初四日，耶和华的话临到撒迦利亚。 
</span><span class='line'>2 那时伯特利人已经打发沙利色和利坚米勒并跟从他们的人，去恳求耶和华的恩， 
</span><span class='line'>3 并问万军之耶和华殿中的祭司和先知说：“我历年以来，在五月间哭泣斋戒，现在还当这样行吗？”
</span><span class='line'>4 万军之耶和华的话就临到我说： 
</span><span class='line'>5 “你要宣告国内的众民和祭司说：你们这七十年在五月、七月禁食悲哀，岂是丝毫向我禁食吗？ 
</span><span class='line'>6 你们吃喝，不是为自己吃、为自己喝吗？ 
</span><span class='line'>7 当耶路撒冷和四围的城邑有居民，正兴盛，南地高原有人居住的时候，耶和华借从前的先知所宣告的话，你们不当听吗？”</span></code></pre></td></tr></table></div></figure>


<p>马太福音 6</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>16 “你们禁食的时候，不可像那假冒为善的人，脸上带着愁容，因为他们把脸弄得难看，故意叫人看出他们是禁食。我实在告诉你们：他们已经得了他们的赏赐。 
</span><span class='line'>17 你禁食的时候，要梳头洗脸， 
</span><span class='line'>18 不叫人看出你禁食来，只叫你暗中的父看见，你父在暗中察看，必然报答你。</span></code></pre></td></tr></table></div></figure>


<ol>
<li>关于祷告的经文</li>
</ol>


<p>马太福音 6</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>5 “你们祷告的时候，不可像那假冒为善的人，爱站在会堂里和十字路口上祷告，故意叫人看见。我实在告诉你们：他们已经得了他们的赏赐。 
</span><span class='line'>6 你祷告的时候，要进你的内屋，关上门，祷告你在暗中的父，你父在暗中察看，必然报答你。 
</span><span class='line'>7 你们祷告，不可像外邦人用许多重复话，他们以为话多了必蒙垂听。 
</span><span class='line'>8 你们不可效法他们，因为你们没有祈求以先，你们所需用的，你们的父早已知道了。
</span><span class='line'>
</span><span class='line'>9 “所以，你们祷告要这样说：‘我们在天上的父，愿人都尊你的名为圣， 
</span><span class='line'>10 愿你的国降临，愿你的旨意行在地上，如同行在天上。 
</span><span class='line'>11 我们日用的饮食，今日赐给我们。 
</span><span class='line'>12 免我们的债，如同我们免了人的债。 
</span><span class='line'>13 不叫我们遇见试探，救我们脱离凶恶[b]。因为国度、权柄、荣耀，全是你的，直到永远。阿门。[c]’ 
</span><span class='line'>14 你们饶恕人的过犯，你们的天父也必饶恕你们的过犯。 
</span><span class='line'>15 你们不饶恕人的过犯，你们的天父也必不饶恕你们的过犯。</span></code></pre></td></tr></table></div></figure>


<h2>新旧难合的比喻</h2>

<p><span style="background-color:yellow">
36 耶稣又设一个比喻，对他们说：<br>
“没有人把新衣服撕下一块来补在旧衣服上，<br>
若是这样，就把新的撕破了，<br>
并且所撕下来的那块新的和旧的也不相称。 <br>
37 也没有人把新酒装在旧皮袋里，<br>
若是这样，新酒必将皮袋裂开，<br>
酒便漏出来，皮袋也就坏了。 <br>
38 但新酒必须装在新皮袋里。 <br>
39 没有人喝了陈酒又想喝新的，他总说陈的好。”<br>
</span></p>

<h4>Cross references, Questions and Notes</h4>

<ol>
<li>其他福音书中的相关叙述</li>
</ol>


<p>马太福音9</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>16 没有人把新布补在旧衣服上，因为所补上的反带坏了那衣服，破的就更大了。 
</span><span class='line'>17 也没有人把新酒装在旧皮袋里，若是这样，皮袋就裂开，酒漏出来，连皮袋也坏了。唯独把新酒装在新皮袋里，两样就都保全了。”</span></code></pre></td></tr></table></div></figure>


<p>马可福音 2</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>21 “没有人把新布缝在旧衣服上，恐怕所补上的新布带坏了旧衣服，破的就更大了。 
</span><span class='line'>22 也没有人把新酒装在旧皮袋里，恐怕酒把皮袋裂开，酒和皮袋就都坏了。唯把新酒装在新皮袋里。”</span></code></pre></td></tr></table></div></figure>


<ol>
<li>其他关于新旧、重生的经文</li>
</ol>


<p>约翰福音 3</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1 有一个法利赛人，名叫尼哥迪慕，是犹太人的官。 
</span><span class='line'>2 这人夜里来见耶稣，说：“拉比，我们知道你是由神那里来做师傅的，因为你所行的神迹，若没有神同在，无人能行。”
</span><span class='line'>3 耶稣回答说：“我实实在在地告诉你：人若不重生，就不能见神的国。” 
</span><span class='line'>4 尼哥迪慕说：“人已经老了，如何能重生呢？岂能再进母腹生出来吗？” 
</span><span class='line'>5 耶稣说：“我实实在在地告诉你：人若不是从水和圣灵生的，就不能进神的国。 
</span><span class='line'>6 从肉身生的就是肉身，从灵生的就是灵。 
</span><span class='line'>7 我说你们必须重生，你不要以为稀奇。</span></code></pre></td></tr></table></div></figure>


<p>罗马书 6</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1 这样，怎么说呢？我们可以仍在罪中，叫恩典显多吗？ 
</span><span class='line'>2 断乎不可！我们在罪上死了的人，岂可仍在罪中活着呢？ 
</span><span class='line'>3 岂不知我们这受洗归入基督耶稣的人，是受洗归入他的死吗？ 
</span><span class='line'>4 所以，我们借着洗礼归入死，和他一同埋葬，原是叫我们一举一动有新生的样式，像基督借着父的荣耀从死里复活一样。</span></code></pre></td></tr></table></div></figure>


<p>哥林多后书 3</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>6 他叫我们能承当这新约的执事，不是凭着字句，乃是凭着精意；因为那字句是叫人死，精意[a]是叫人活。</span></code></pre></td></tr></table></div></figure>


<p>哥林多后书 4</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>16 所以我们不丧胆，外体虽然毁坏，内心却一天新似一天。</span></code></pre></td></tr></table></div></figure>


<p>哥林多后书 5</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>17 若有人在基督里，他就是新造的人，旧事已过，都变成新的了。</span></code></pre></td></tr></table></div></figure>


<p>启示录 21</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1 我又看见一个新天新地，因为先前的天地已经过去了，海也不再有了。 
</span><span class='line'>2 我又看见圣城新耶路撒冷由神那里从天而降，预备好了，就如新妇装饰整齐等候丈夫。
</span><span class='line'>
</span><span class='line'>3 我听见有大声音从宝座出来说：“看哪，神的帐幕在人间！他要与人同住，他们要做他的子民，神要亲自与他们同在，做他们的神。 
</span><span class='line'>4 神要擦去他们一切的眼泪，不再有死亡，也不再有悲哀、哭号、疼痛，因为以前的事都过去了。” 
</span><span class='line'>5 坐宝座的说：“看哪，我将一切都更新了！”又说：“你要写上，因这些话是可信的，是真实的。”</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Research: Generate Core Dump File Programmatically in QNX]]></title>
    <link href="http://wanglij.github.io/blog/2015/08/21/research-generate-core-dump-file-programmatically/"/>
    <updated>2015-08-21T15:50:12+00:00</updated>
    <id>http://wanglij.github.io/blog/2015/08/21/research-generate-core-dump-file-programmatically</id>
    <content type="html"><![CDATA[<h2>Requirements:</h2>

<p>A core dump is a file containing a process&rsquo;s address space, and it is usually generated when the process terminates unexpectedly.
But, sometimes, we need our program to recover from the unexpected termination, and also generate a core dump.
Assume we already had the following code to capture and handle signals so that the program can restart itself, now we need to add the code for core dump.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>void signal_handler(int sig) {
</span><span class='line'>  // stop and clean up
</span><span class='line'>  machine-&gt;stop()
</span><span class='line'>  ...
</span><span class='line'>  
</span><span class='line'>  // log this event
</span><span class='line'>  ...
</span><span class='line'>
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>int main(int argc, char* argv[])
</span><span class='line'>{
</span><span class='line'>  ...
</span><span class='line'>  (void) signal( SIGFPE, signal_handler );
</span><span class='line'>  (void) signal( SIGSEGV, signal_handler );
</span><span class='line'>  ...
</span><span class='line'>  while (run)
</span><span class='line'>  {
</span><span class='line'>      machine = new Machine;
</span><span class='line'>      machine-&gt;run();
</span><span class='line'>      delete(machine);
</span><span class='line'>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h2>Solutions that I tried</h2>

<p>This has to be done in the signal handler function, because we want to take the snapshot of the process&rsquo;s memory when it recieved the signal.</p>

<h3>Set signal handler back to SIG_DFL</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>signal(sig, SIG_DFL);
</span><span class='line'>kill(getpid(), sig);</span></code></pre></td></tr></table></div></figure>


<p>This wouldn&rsquo;t work, since the default behavior of the signals causing core dump will terminate our program, but we want our program keep running.
This solution is useful in the scenario where we just want to add some addtional processing before the unexceptional signals terminate our program.</p>

<h3>Start a new process for the program, then terminate current process</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>spawnl(P_NOWAITO, program_path, program_name);
</span><span class='line'>signal(sig, SIG_DFL);
</span><span class='line'>kill(getpid(), sig);</span></code></pre></td></tr></table></div></figure>


<p>The spawnl will cause SIGSEGV again.</p>

<h3>Fork a child process, then abort</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pid_t pid = fork();
</span><span class='line'>if (pid == 0)
</span><span class='line'>{
</span><span class='line'>  abort();
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Currently, for QNX, fork() is supported only in single-threaded applications.
If you create a thread and then call fork(), the function returns -1 and sets errno to ENOSYS.
This will not work either, since our program is multiple-threaded.</p>

<h3>gcore</h3>

<p>AFAK, QNX doesn&rsquo;t support gcore yet.</p>

<h2>Conclusion</h2>

<p>So far, it looks like we cannot have both core dump and recovery together.</p>

<h2>References</h2>

<p>[1] <a href="http://www.alexonlinux.com/how-to-handle-sigsegv-but-also-generate-core-dump">How to handle SIGSEGV, but also generate a core dump</a><br>
[2] <a href="http://stackoverflow.com/questions/979141/how-to-programatically-cause-a-core-dump-in-c-c">How to programatically cause a core dump in C/C++</a><br>
[3] <a href="http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/lib_ref/s/spawnl.html">http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/lib_ref/s/spawnl.html</a><br>
[4] <a href="http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/lib_ref/f/fork.html">http://www.qnx.com/developers/docs/6.3.0SP3/neutrino/lib_ref/f/fork.html</a><br>
[5] [core dump file] (<a href="https://www.google.com/search?q=core+dump+file&amp;ie=utf-8&amp;oe=utf-8">https://www.google.com/search?q=core+dump+file&amp;ie=utf-8&amp;oe=utf-8</a>)<br>
[6] <a href="http://man7.org/linux/man-pages/man1/gcore.1.html">http://man7.org/linux/man-pages/man1/gcore.1.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Troubleshooting: Core Dump File Not in Current Directory]]></title>
    <link href="http://wanglij.github.io/blog/2015/08/21/troubleshooting-core-dump-file-not-in-current-directory/"/>
    <updated>2015-08-21T14:40:29+00:00</updated>
    <id>http://wanglij.github.io/blog/2015/08/21/troubleshooting-core-dump-file-not-in-current-directory</id>
    <content type="html"><![CDATA[<h2>ISSUE</h2>

<p>I was testing the following program in Arch Linux system. I expect a core dump file created in current direcotry, when I send a SIGSEGV signal to the process.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;stdio.h&gt;
</span><span class='line'>#include &lt;sys/types.h&gt;
</span><span class='line'>#include &lt;unistd.h&gt;
</span><span class='line'>#include &lt;signal.h&gt;
</span><span class='line'>   
</span><span class='line'>void sighandler(int signum)
</span><span class='line'>{
</span><span class='line'>    printf("Process %d got signal %d\n", getpid(), signum);
</span><span class='line'>    signal(signum, SIG_DFL);
</span><span class='line'>    kill(getpid(), signum);
</span><span class='line'>}
</span><span class='line'>   
</span><span class='line'>int main()
</span><span class='line'>{
</span><span class='line'>    signal(SIGSEGV, sighandler);
</span><span class='line'>    printf("Process %d waits for someone to send it SIGSEGV\n",
</span><span class='line'>        getpid());
</span><span class='line'>    sleep(1000);
</span><span class='line'> 
</span><span class='line'>    return 0;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Here is what I did:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[wanglij@~/test]$ ./a.out &
</span><span class='line'>[1] 38145
</span><span class='line'>[wanglij@~/test]$ Process 38145 waits for someone to send it SIGSEGV
</span><span class='line'>kill -11 38145
</span><span class='line'>Process 38145 got signal 11                                                                                          
</span><span class='line'>[wanglij@~/test]$ 
</span><span class='line'>[1]  + segmentation fault (core dumped)  ./a.out</span></code></pre></td></tr></table></div></figure>


<p>Everything seems to be fine, but there is no core dump file created at all.</p>

<h2>Troubleshooting</h2>

<p>First check the limit of core file size:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[wanglij@~/test]$ ulimit -a
</span><span class='line'>-t: cpu time (seconds)              unlimited
</span><span class='line'>-f: file size (blocks)              unlimited
</span><span class='line'>-d: data seg size (kbytes)          unlimited
</span><span class='line'>-s: stack size (kbytes)             8192
</span><span class='line'>-c: core file size (blocks)         unlimited
</span><span class='line'>-m: resident set size (kbytes)      unlimited
</span><span class='line'>-u: processes                       15778
</span><span class='line'>-n: file descriptors                1024
</span><span class='line'>-l: locked-in-memory size (kbytes)  64
</span><span class='line'>-v: address space (kbytes)          unlimited
</span><span class='line'>-x: file locks                      unlimited
</span><span class='line'>-i: pending signals                 15778
</span><span class='line'>-q: bytes in POSIX msg queues       819200
</span><span class='line'>-e: max nice                        20
</span><span class='line'>-r: max rt priority                 0
</span><span class='line'>-N 15:                              unlimited</span></code></pre></td></tr></table></div></figure>


<p>Then, after googling, it turns out it&rsquo;s because of the /proc/sys/kernel/core_pattern file.
Here is what&rsquo;s in my core_pattern:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[wanglij@~/test]$ cat /proc/sys/kernel/core_pattern 
</span><span class='line'>|/usr/lib/systemd/systemd-coredump %p %u %g %s %t %e</span></code></pre></td></tr></table></div></figure>


<p>Since the first character is a pipe, &ldquo;|&rdquo;, then the rest of the pattern will be treated as a command by the kernel. Consequently, the core dump will be sent to journald as part of system log.
We need to change the line of the core_pattern to &ldquo;core&rdquo;.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[wanglij@~/test]$ sudo bash -c 'echo core.%e.%p &gt; /proc/sys/kernel/core_pattern'
</span><span class='line'>[wanglij@~/test]$ cat /proc/sys/kernel/core_pattern
</span><span class='line'>core.%e.%p</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<p>[1] <a href="http://www.bogotobogo.com/cplusplus/debugging_core_memory_dump_segmentation_fault_gdb.php">http://www.bogotobogo.com/cplusplus/debugging_core_memory_dump_segmentation_fault_gdb.php</a><br>
[2] <a href="https://wiki.archlinux.org/index.php/Core_dump">https://wiki.archlinux.org/index.php/Core_dump</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Had Such a Blessed Day]]></title>
    <link href="http://wanglij.github.io/blog/2015/08/07/had-such-a-blessed-day/"/>
    <updated>2015-08-07T20:16:41+00:00</updated>
    <id>http://wanglij.github.io/blog/2015/08/07/had-such-a-blessed-day</id>
    <content type="html"><![CDATA[<p>昨天一家人一起去看了马戏。是儿子的第一次也是我的第一次，真的好精彩。</p>

<p>两岁的儿子表现出了从未有过的专注和兴奋。开始他坐在自己的座椅上，在我和我妻子中间。相对于他小小的身躯，那个座椅简直就是一个后仰大沙发，略显滑稽。后来我干脆把他抱在我的腿上，这样一家人凑在两个座位上。</p>

<p>这些丝毫没有搅扰到他观看演出的兴致。他的眼睛里闪烁着愉悦的光彩，稚嫩的小手不由自主地拍个不停，以至于他的妈妈会担心他的手会痛。频繁拍动的小手发出微弱但仍然清脆的掌声，我想除了他和我们自己不会有太多人听的到，但是执着地表达着来自一个小小生命对表演的喝彩，如此单纯而动人。</p>

<p>他还不懂得抱怨我们的位置离舞台太远，也没有因为艳羡别的小朋友手上花哨的玩具而哭闹，更没有因为这些埋怨我们小气（因为我们闲太贵所以在摊位前面沉吟了半天还是没有买），只是单纯的享受表演的精彩。情景之中，心中有一种莫名的感动。我们的人生当中又何尝不是需要时常鼓掌呢？即使那掌声被其他千千万万的掌声所淹没，但是当它如此单纯地发自生命的深处时，虽然微弱，仍然是那么的生动，因为那是来自一个生命的赞美。只是我们有时候会搞错了鼓掌的对象，或者因为那些得不到的不重要的事物而忘记了为我们所拥有的精彩而鼓掌，或者因为时常处在精彩之中已经习以为常甚至厌倦了。</p>

<p>我们所生活的这个世界有各样的诱惑、羁绊。很多本不该赢得人们掌声的东西干扰甚至吸引了我们，也有很多冷水泼在我们即将或者正在发出生命的光彩的时候，当我们搞不清这个大舞台到底谁是主角的时候，就像失丧的羊一样迷茫，搞不清我们当下该做的是什么。</p>

<p>真的很感激能够和家人一起度过这么幸福的一天，虽然路上堵车很严重，虽然我们的座位离舞台有点远，虽然我们可能被卖玩具的摊主鄙视了，但是我们看到了一场精彩纷呈的演出，和最亲密的人在一起。另外，票是朋友免费送的，不是吗？生活中无与伦比的好东西经常是免费送的。说不出的心存感激！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Prayer in My Dream]]></title>
    <link href="http://wanglij.github.io/blog/2015/08/07/prayer-in-my-dream/"/>
    <updated>2015-08-07T18:31:23+00:00</updated>
    <id>http://wanglij.github.io/blog/2015/08/07/prayer-in-my-dream</id>
    <content type="html"><![CDATA[<p>昨天夜里做了一个梦。虽不记得全部内容，但梦中祷告时的感动记忆犹新。</p>

<p>”圣父、生子、圣灵，<br>
感谢你的饶恕，<br>
感谢你的救赎，<br>
感谢你用无罪圣洁的生命换取我们这些有罪污秽的生命，<br>
感谢赐下天上的粮，牧养我们的灵！<br>
求你荣耀破碎的器皿为你做功，<br>
求你感动我们眼前的这位弟兄，<br>
叫我们今天得人如得鱼，<br>
让我们与你一同庆祝丰收的喜悦！<br>
&hellip;<br>”</p>

<p>哈利路亚！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Amazing Dead Sea Scrolls]]></title>
    <link href="http://wanglij.github.io/blog/2015/07/30/amazing-dead-sea-scrolls/"/>
    <updated>2015-07-30T17:40:24+00:00</updated>
    <id>http://wanglij.github.io/blog/2015/07/30/amazing-dead-sea-scrolls</id>
    <content type="html"><![CDATA[<p><a href="https://en.wikipedia.org/wiki/Dead_Sea_Scrolls">Wikipedia page</a><br>
<a href="http://dss.collections.imj.org.il/">The Digital Dead Sea Scrolls</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[路加福音 4 (Study Notes)]]></title>
    <link href="http://wanglij.github.io/blog/2015/07/29/luke-4-study-notes/"/>
    <updated>2015-07-29T16:37:48+00:00</updated>
    <id>http://wanglij.github.io/blog/2015/07/29/luke-4-study-notes</id>
    <content type="html"><![CDATA[<h2>耶稣受试探</h2>

<p><span style="background-color:yellow">
1 耶稣被圣灵充满，从约旦河回来，<br>
圣灵将他引到旷野，四十天受魔鬼的试探。 <br>
2 那些日子没有吃什么，日子满了，他就饿了。 <br><br>
3 魔鬼对他说：“你若是神的儿子，可以吩咐这块石头变成食物！” <br>
4 耶稣回答说：<br>
<strong>“经上记着说：‘人活着不是单靠食物，乃是靠神口里所出的一切话。’”</strong> <br><br>
5 魔鬼又领他上了高山，霎时间把天下的万国都指给他看， <br>
6 对他说：“这一切权柄、荣华我都要给你，<br>
因为这原是交付我的，我愿意给谁就给谁。 <br>
7 你若在我面前下拜，这都要归你。” <br>
8 耶稣说：<br>
<strong>“经上记着说：‘当拜主你的神，单要侍奉他。’” </strong><br><br>
9 魔鬼又领他到耶路撒冷去，叫他站在殿顶上，<br>
对他说：“你若是神的儿子，可以从这里跳下去！<br>
10 因为经上记着说：‘主要为你吩咐他的使者保护你， <br>
11 他们要用手托着你，免得你的脚碰在石头上。’” <br>
12 耶稣对他说：<br>
<strong>“经上说：‘不可试探主你的神。’”</strong><br><br>
13 魔鬼用完了各样的试探，就暂时离开耶稣。<br>
</span></p>

<h4>Cross references and Questions</h4>

<ol>
<li>从约旦河回来, what happened around the Jordan? what did Jesus do there?<br>
The Baptist John went into all the country around the Jordan, preaching a baptism of repentance for the forgiveness of sins. (Luke 3:3)<br>
Luke 3</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>21 When all the people were being baptized, Jesus was baptized too. 
</span><span class='line'>22 And as he was praying, heaven was opened and the Holy Spirit descended on him in bodily form like a dove. (Luke 3:21,22)</span></code></pre></td></tr></table></div></figure>


<ol>
<li><p>圣灵将他引到旷野，四十天受魔鬼的试探<br>
Although the temptation was done by the devil, it was allowed and led by the Holy Spirit.</p></li>
<li><p>Jesus&#8217; response to different temptations<br>
人活着不是单靠食物，乃是靠神口里所出的一切话。<br>
当拜主你的神，单要侍奉他。<br>
不可试探主你的神。<br></p></li>
<li><p>v13: 魔鬼暂时离开耶稣。(he left him until an opportune time)</p></li>
</ol>


<p>申命记 8</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1 “我今日所吩咐的一切诫命，你们要谨守遵行，好叫你们存活，人数增多，且进去得耶和华向你们列祖起誓应许的那地。 
</span><span class='line'>2 你也要记念耶和华你的神在旷野引导你这四十年，是要苦炼你、试验你，要知道你心内如何，肯守他的诫命不肯。 
</span><span class='line'>3 他苦炼你，任你饥饿，将你和你列祖所不认识的吗哪赐给你吃，使你知道人活着不是单靠食物，乃是靠耶和华口里所出的一切话。</span></code></pre></td></tr></table></div></figure>


<p>约翰福音 6</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>32 耶稣说：“我实实在在地告诉你们：那从天上来的粮不是摩西赐给你们的，乃是我父将天上来的真粮赐给你们。 
</span><span class='line'>33 因为神的粮就是那从天上降下来赐生命给世界的。”</span></code></pre></td></tr></table></div></figure>


<p>Deuteronomy 6</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>13 Fear the Lord your God, serve him only and take your oaths in his name. 
</span><span class='line'>14 Do not follow other gods, the gods of the peoples around you;
</span><span class='line'>15 for the Lord your God, who is among you, is a jealous God and his anger will burn against you, and he will destroy you from the face of the land. 
</span><span class='line'>16 Do not put the Lord your God to the test as you did at Massah. 
</span><span class='line'>17 Be sure to keep the commands of the Lord your God and the stipulations and decrees he has given you. </span></code></pre></td></tr></table></div></figure>


<p>Psalm 91</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>9 If you say, “The Lord is my refuge,”
</span><span class='line'>    and you make the Most High your dwelling,
</span><span class='line'>10 no harm will overtake you,
</span><span class='line'>    no disaster will come near your tent.
</span><span class='line'>11 For he will command his angels concerning you
</span><span class='line'>    to guard you in all your ways;
</span><span class='line'>12 they will lift you up in their hands,
</span><span class='line'>    so that you will not strike your foot against a stone.
</span><span class='line'>13 You will tread on the lion and the cobra;
</span><span class='line'>    you will trample the great lion and the serpent.</span></code></pre></td></tr></table></div></figure>


<p>其他相关经节：<br>
以西结2：8-3：3，诗篇119：9-11，19：7-14，耶利米15：166，以弗所6：11-17</p>

<h2>耶稣回到加利利</h2>

<p><span style="background-color:yellow">
14 耶稣满有圣灵的能力，回到加利利，他的名声就传遍了四方。 <br>
15 他在各会堂里教训人，众人都称赞他。<br>
</span></p>

<p>About Galilee:<br>
Galilee is a region in northern Israel which overlaps with much of the administrative Northern District and Haifa District of the country. Traditionally divided into Upper Galilee, Lower Galilee, and Western Galilee</p>

<h2>耶稣在拿撒勒传道</h2>

<p><span style="background-color:yellow">
16 耶稣来到拿撒勒，就是他长大的地方，<br>
在安息日，照他平常的规矩进了会堂，站起来要念圣经。<br>
17 有人把先知以赛亚的书交给他，他就打开，找到一处写着说： <br>
18 <strong>“主的灵在我身上，</strong><br>
<strong>因为他用膏膏我，</strong><br>
<strong>叫我传福音给贫穷的人，</strong><br>
<strong>差遣我报告被掳的得释放、瞎眼的得看见，</strong><br>
<strong>叫那受压制的得自由，</strong><br>
19 <strong>报告神悦纳人的禧年。” </strong><br>
20 于是把书卷起来，交还执事，就坐下。<br>
会堂里的人都定睛看他。 <br>
21 耶稣对他们说：<br>
<strong>“今天这经应验在你们耳中了。” </strong><br>
22 众人都<strong>称赞</strong>他，并<strong>稀奇</strong>他口中所出的恩言，<br>
又说：“这不是约瑟的儿子吗？”<br>
23 耶稣对他们说：<br>
<strong>“你们必引这俗语向我说：‘医生，你医治自己吧！</strong><br>
<strong>我们听见你在迦百农所行的事，也当行在你自己家乡里！’”</strong> <br>
</span></p>

<p>Isaiah 61</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>“主耶和华的灵在我身上，因为耶和华用膏膏我，叫我传好信息给谦卑的人[a]，差遣我医好伤心的人，报告被掳的得释放、被囚的出监牢， 
</span><span class='line'>2 报告耶和华的恩年和我们神报仇的日子，安慰一切悲哀的人， 
</span><span class='line'>3 赐华冠于锡安悲哀的人代替灰尘，喜乐油代替悲哀，赞美衣代替忧伤之灵，使他们称为公义树，是耶和华所栽的，叫他得荣耀。”
</span><span class='line'>1 The Spirit of the Sovereign Lord is on me,
</span><span class='line'>    because the Lord has anointed me
</span><span class='line'>    to proclaim good news to the poor.
</span><span class='line'>He has sent me to bind up the brokenhearted,
</span><span class='line'>    to proclaim freedom for the captives
</span><span class='line'>    and release from darkness for the prisoners,[a]
</span><span class='line'>2 to proclaim the year of the Lord’s favor
</span><span class='line'>    and the day of vengeance of our God,
</span><span class='line'>to comfort all who mourn,
</span><span class='line'>3 and provide for those who grieve in Zion—
</span><span class='line'>to bestow on them a crown of beauty
</span><span class='line'>    instead of ashes,
</span><span class='line'>the oil of joy
</span><span class='line'>    instead of mourning,
</span><span class='line'>and a garment of praise
</span><span class='line'>    instead of a spirit of despair.
</span><span class='line'>They will be called oaks of righteousness,
</span><span class='line'>    a planting of the Lord
</span><span class='line'>    for the display of his splendor</span></code></pre></td></tr></table></div></figure>


<h2>被撵出城</h2>

<p><span style="background-color:yellow">
24 又说：<strong>“我实在告诉你们：没有先知在自己家乡被人悦纳的。</strong><br>
25 <strong>“我对你们说实话，</strong><br>
<strong>当以利亚的时候，天闭塞了三年零六个月，</strong><br>
<strong>遍地有大饥荒，那时以色列中有许多寡妇，</strong> <br>
26 <strong>以利亚并没有奉差往她们一个人那里去，</strong><br>
<strong>只奉差往西顿的撒勒法一个寡妇那里去。</strong> <br>
27 <strong>先知以利沙的时候，以色列中有许多长大麻风的，</strong><br>
<strong>但内中除了叙利亚国的乃缦，没有一个得洁净的。” </strong><br>
28 会堂里的人听见这话，都<strong>怒气满胸</strong>， <br>
29 就起来撵他出城。他们的城造在山上。<br>
他们带他到山崖，要把他推下去。 <br>
30 他却从他们中间直行，过去了。<br>
</span></p>

<h2>在迦百农赶逐污鬼</h2>

<p><span style="background-color:yellow">
31 耶稣下到迦百农，就是加利利的一座城，在安息日教训众人。 <br>
32 他们很稀奇他的教训，因为他的话里有权柄。 <br>
33 在会堂里有一个人被污鬼的精气附着，大声喊叫说： <br>
34 “唉！拿撒勒的耶稣，我们与你有什么相干？<br>
你来灭我们吗？我知道你是谁，乃是神的圣者！”<br>
35 耶稣责备他说：<br>
“不要作声！从这人身上出来吧！”<br>
鬼把那人摔倒在众人中间，就出来了，却也没有害他。<br>
36 众人都惊讶，彼此对问说：<br>
“这是什么道理呢？因为他用权柄能力吩咐污鬼，污鬼就出来。” <br>
37 于是耶稣的名声传遍了周围地方。<br>
</span></p>

<p>马可福音 1</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>21 到了迦百农，耶稣就在安息日进了会堂教训人。 
</span><span class='line'>22 众人很稀奇他的教训，因为他教训他们正像有权柄的人，不像文士。 
</span><span class='line'>23 在会堂里有一个人被污鬼附着，他喊叫说： 
</span><span class='line'>24 “拿撒勒人耶稣，我们与你有什么相干？你来灭我们吗？我知道你是谁，乃是神的圣者！” 
</span><span class='line'>25 耶稣责备他说：“不要作声！从这人身上出来吧！” 
</span><span class='line'>26 污鬼叫那人抽了一阵风，大声喊叫，就出来了。 
</span><span class='line'>27 众人都惊讶，以致彼此对问说：“这是什么事？是个新道理啊！他用权柄吩咐污鬼，连污鬼也听从了他。” 
</span><span class='line'>28 耶稣的名声就传遍了加利利的四方。</span></code></pre></td></tr></table></div></figure>


<h2>医西门岳母</h2>

<p><span style="background-color:yellow">
38 耶稣出了会堂，进了西门的家。<br>
西门的岳母害热病甚重，有人为她求耶稣。 <br>
39 耶稣站在她旁边，斥责那热病，热就退了。<br>
她立刻起来服侍他们。<br>
40 日落的时候，凡有病人的，不论害什么病，都带到耶稣那里。<br>
耶稣按手在他们各人身上，医好他们。 <br>
41 又有鬼从好些人身上出来，喊着说：“你是神的儿子！”<br>
耶稣<strong>斥责</strong>他们，<strong>不许他们说话</strong>，<br>
因为他们知道他是基督。<br>
42 天亮的时候，耶稣出来，走到旷野地方。<br>
众人去找他，到了他那里，要留住他，不要他离开他们。 <br>
43 但耶稣对他们说：<br>
<strong>“我也必须在别城传神国的福音，</strong><br>
<strong>因我奉差原是为此。”</strong><br>
44 于是耶稣在加利利的各会堂传道。<br>
</span></p>

<p>马可福音 1</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>29 他们一出会堂，就同着雅各、约翰进了西门和安得烈的家。 
</span><span class='line'>30 西门的岳母正害热病躺着，就有人告诉耶稣。 
</span><span class='line'>31 耶稣进前拉着她的手，扶她起来，热就退了，她就服侍他们。
</span><span class='line'>32 天晚日落的时候，有人带着一切害病的和被鬼附的来到耶稣跟前。 
</span><span class='line'>33 合城的人都聚集在门前。 
</span><span class='line'>34 耶稣治好了许多害各样病的人，又赶出许多鬼，不许鬼说话，因为鬼认识他。</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[路加福音 3 (Study Notes)]]></title>
    <link href="http://wanglij.github.io/blog/2015/07/24/luke-3-study-notes/"/>
    <updated>2015-07-24T19:10:04+00:00</updated>
    <id>http://wanglij.github.io/blog/2015/07/24/luke-3-study-notes</id>
    <content type="html"><![CDATA[<h2>施洗约翰在旷野传道</h2>

<p><span style="background-color:yellow">
1 恺撒提庇留在位第十五年，<br>
本丢·彼拉多做犹太巡抚，<br>
希律做加利利分封的王，<br>
他的兄弟腓力做以土利亚和特拉可尼地方分封的王，<br>
吕撒聂做亚比利尼分封的王， <br>
2 亚那和该亚法做大祭司。<br>
那时，撒迦利亚的儿子约翰在旷野里，神的话临到他。
3 他就来到约旦河一带地方，<br>
宣讲<strong>悔改的洗礼</strong>，使罪得赦。 <br>
4 正如先知以赛亚书上所记的话说：<br>
“在旷野有人声喊着说：‘预备主的道，修直他的路！ <br>
5 一切山洼都要填满，大小山冈都要削平，<br>
弯弯曲曲的地方要改为正直，高高低低的道路要改为平坦。 <br>
6 凡有血气的，都要见神的救恩。’”
</span></p>

<h4>Q&amp;A</h4>

<ol>
<li><p>恺撒提庇留<br>
Tiberius (16 November 42 BC - 16 March 37 AD) was a Roman Emperor from 14 AD to 37 AD.[1]</p></li>
<li><p>本丢·彼拉多<br>
Pontius Pilate was the fifth prefect of the Roman province of Judaea from AD 26 - 36.</p></li>
<li><p>希律<br>
Herod Antipas (20 BC-c. AD 40), tetrarch (古罗马帝国行省的四分之一地区的长官) of Galilee and Peraea, called &ldquo;Herod the Tetrarch&rdquo; or &ldquo;Herod&rdquo; in the New Testament up to Acts 4:27.
Antipas divorced his first wife Phasaelis, the daughter of King Aretas IV of Nabatea, in favour of Herodias, who had formerly been married to his brother Herod Philip I.</p></li>
<li><p>他的兄弟腓力<br>
Philip the Tetrarch (sometimes called Herod Philip II by modern writers) was son of Herod the Great and his fifth wife, Cleopatra of Jerusalem.
He was a half-brother of Herod Antipas and Herod Archelaus; and should not be confused with Herod II, whom some writers call Herod Philip I.</p></li>
<li><p>吕撒聂<br>
Lysanias tetrarch of Abilene</p></li>
<li><p>亚那和该亚法<br>
Annas was appointed by the Roman legate Quirinius as the first High Priest of the newly formed Roman province of Iudaea in 6 AD.<br>
Joseph Caiaphas, known simply as Caiaphas in the New Testament, was the Jewish high priest who is said to have organized the plot to kill Jesus. <br></p></li>
</ol>


<p>The Division of Herod&rsquo;s Kingdom:<br>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Palestine_after_Herod.png/300px-Palestine_after_Herod.png"></p>

<p>以赛亚书40</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>3 有人声喊着说：“在旷野预备耶和华的路，在沙漠地修平我们神的道！ 
</span><span class='line'>4 一切山洼都要填满，大小山冈都要削平，高高低低的要改为平坦，崎崎岖岖的必成为平原。 
</span><span class='line'>5 耶和华的荣耀必然显现，凡有血气的必一同看见，因为这是耶和华亲口说的。”</span></code></pre></td></tr></table></div></figure>


<p>马太福音 3</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1 那时，有施洗的约翰出来，在犹太的旷野传道说： 
</span><span class='line'>2 “天国近了，你们应当悔改！” 
</span><span class='line'>3 这人就是先知以赛亚所说的，他说：“在旷野有人声喊着说：‘预备主的道，修直他的路！’”</span></code></pre></td></tr></table></div></figure>


<p><span style="background-color:yellow">
7 约翰对那出来要受他洗的众人说：<br>
“毒蛇的种类！谁指示你们逃避将来的愤怒呢？ <br>
8 <strong>你们要结出果子来，与悔改的心相称！</strong><br>
不要自己心里说：‘有亚伯拉罕为我们的祖宗。’<br>
我告诉你们，神能从这些石头中给亚伯拉罕兴起子孙来。 <br>
9 现在斧子已经放在树根上，凡不结好果子的树就砍下来，丢在火里。” <br>
10 众人问他说：<br>
“这样，<strong>我们当做什么呢？</strong>” <br>
11 约翰回答说：<br>
“有两件衣裳的，就分给那没有的，<br>
有食物的也当这样行。” <br>
12 又有税吏来要受洗，问他说：<br>
“夫子，<strong>我们当做什么呢？</strong>” <br>
13 约翰说：<br>
“除了例定的数目，不要多取。” <br>
14 又有兵丁问他说：<br>
“<strong>我们当做什么呢？</strong>”<br>
约翰说：<br>
“不要以强暴待人，也不要讹诈人，自己有钱粮就当知足。”
</span></p>

<h4>Cross References, Q&amp;A</h4>

<p>马太福音 3</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>7 约翰看见许多法利赛人和撒都该人也来受洗，就对他们说：“毒蛇的种类！谁指示你们逃避将来的愤怒呢？ 
</span><span class='line'>8 你们要结出果子来，与悔改的心相称！ 
</span><span class='line'>9 不要自己心里说：‘有亚伯拉罕为我们的祖宗。’我告诉你们，神能从这些石头中给亚伯拉罕兴起子孙来。 
</span><span class='line'>10 现在斧子已经放在树根上，凡不结好果子的树就砍下来，丢在火里。</span></code></pre></td></tr></table></div></figure>


<p>Q: 我们当做什么呢？</p>

<h2>必有圣灵与火的洗</h2>

<p><span style="background-color:yellow">
15 百姓指望基督来的时候，人都心里猜疑或者约翰是基督。<br>
16 约翰说：<br>
“我是用水给你们施洗。<br>
但有一位能力比我更大的要来，<br>
我就是给他解鞋带也不配，<br>
他要用<strong>圣灵</strong>与<strong>火</strong>给你们施洗。 <br>
17 他手里拿着簸箕，要扬净他的场，<br>
把麦子收在仓里，<br>
把糠用不灭的火烧尽了。”
</span></p>

<h4>Cross References, Q&amp;A</h4>

<p>马太福音 3</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>11 “我是用水给你们施洗，叫你们悔改；但那在我以后来的，能力比我更大，我就是给他提鞋也不配，他要用圣灵与火给你们施洗。 
</span><span class='line'>12 他手里拿着簸箕，要扬净他的场，把麦子收在仓里，把糠用不灭的火烧尽了。”</span></code></pre></td></tr></table></div></figure>


<p>Q: 用火给你施洗是什么意思？<br>
希伯来书 12</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>28 所以，我们既得了不能震动的国，就当感恩，照神所喜悦的，用虔诚、敬畏的心侍奉神， 
</span><span class='line'>29 因为我们的神乃是烈火。
</span><span class='line'>28 Therefore, since we are receiving a kingdom that cannot be shaken, let us be thankful, and so worship God acceptably with reverence and awe, 
</span><span class='line'>29 for our “God is a consuming fire.”</span></code></pre></td></tr></table></div></figure>


<p>申命记 4</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>23 你们要谨慎，免得忘记耶和华你们神与你们所立的约，为自己雕刻偶像，就是耶和华你神所禁止你做的偶像， 
</span><span class='line'>24 因为耶和华你的神乃是烈火，是忌邪的神。
</span><span class='line'>23 Be careful not to forget the covenant of the Lord your God that he made with you; do not make for yourselves an idol in the form of anything the Lord your God has forbidden. 
</span><span class='line'>24 For the Lord your God is a consuming fire, a jealous God.</span></code></pre></td></tr></table></div></figure>


<h2>约翰责备希律被囚</h2>

<p><span style="background-color:yellow">
18 约翰又用许多别的话劝百姓，向他们传福音。 <br>
19 只是分封的王希律因他兄弟之妻希罗底的缘故，<br>
并因他所行的一切恶事，受了约翰的责备，<br>
20 又另外添了一件，就是把约翰收在监里。
</span></p>

<p>王希律因他兄弟之妻希罗底的缘故：<br>
Antipas divorced his first wife Phasaelis in favour of Herodias, who had formerly been married to his brother Herod Philip I.</p>

<h2>耶稣受洗</h2>

<p><span style="background-color:yellow">
21 <strong>众百姓都受了洗，</strong><br>
<strong>耶稣也受了洗，</strong><br>
<strong>正祷告的时候天就开了，</strong><br>
22 <strong>圣灵降临在他身上，</strong><br>
<strong>形状仿佛鸽子；</strong><br>
<strong>又有声音从天上来说：</strong><br>
<strong>“你是我的爱子，我喜悦你。”</strong>
</span></p>

<h2>耶稣的家谱</h2>

<p>23 耶稣开头传道，年纪约有三十岁。依人看来，他是约瑟的儿子，约瑟是希里的儿子，
24 希里是玛塔的儿子，玛塔是利未的儿子，利未是麦基的儿子，麦基是雅拿的儿子，雅拿是约瑟的儿子，
25 约瑟是玛他提亚的儿子，玛他提亚是亚摩斯的儿子，亚摩斯是拿鸿的儿子，拿鸿是以斯利的儿子，以斯利是拿该的儿子，
26 拿该是玛押的儿子，玛押是玛他提亚的儿子，玛他提亚是西美的儿子，西美是约瑟的儿子，约瑟是犹大的儿子，犹大是约亚拿的儿子，
27 约亚拿是利撒的儿子，利撒是所罗巴伯的儿子，所罗巴伯是撒拉铁的儿子，撒拉铁是尼利的儿子，尼利是麦基的儿子，
28 麦基是亚底的儿子，亚底是哥桑的儿子，哥桑是以摩当的儿子，以摩当是珥的儿子，珥是约细的儿子，
29 约细是以利以谢的儿子，以利以谢是约令的儿子，约令是玛塔的儿子，玛塔是利未的儿子，
30 利未是西缅的儿子，西缅是犹大的儿子，犹大是约瑟的儿子，约瑟是约南的儿子，约南是以利亚敬的儿子，
31 以利亚敬是米利亚的儿子，米利亚是买南的儿子，买南是玛达他的儿子，玛达他是拿单的儿子，拿单是大卫的儿子，
32 <strong>大卫</strong>是耶西的儿子，耶西是俄备得的儿子，俄备得是波阿斯的儿子，波阿斯是撒门的儿子，撒门是拿顺的儿子，
33 拿顺是亚米拿达的儿子，亚米拿达是亚兰的儿子，亚兰是希斯仑的儿子，希斯仑是法勒斯的儿子，法勒斯是犹大的儿子，
34 <strong>犹大</strong>是雅各的儿子，<strong>雅各</strong>是以撒的儿子，<strong>以撒</strong>是亚伯拉罕的儿子，<strong>亚伯拉罕</strong>是他拉的儿子，他拉是拿鹤的儿子，
35 拿鹤是西鹿的儿子，西鹿是拉吴的儿子，拉吴是法勒的儿子，法勒是希伯的儿子，希伯是沙拉的儿子，
36 沙拉是该南的儿子，该南是亚法撒的儿子，亚法撒是闪的儿子，闪是挪亚的儿子，挪亚是拉麦的儿子，
37 拉麦是玛土撒拉的儿子，玛土撒拉是以诺的儿子，以诺是雅列的儿子，雅列是玛勒列的儿子，玛勒列是该南的儿子，该南是以挪士的儿子，
38 以挪士是塞特的儿子，塞特是亚当的儿子，<strong>亚当</strong>是神的儿子。</p>

<h2>References</h2>

<ol>
<li><a href="https://en.wikipedia.org/wiki/Tiberius">https://en.wikipedia.org/wiki/Tiberius</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pontius_Pilate">https://en.wikipedia.org/wiki/Pontius_Pilate</a></li>
<li><a href="https://en.wikipedia.org/wiki/Herod_Antipas">https://en.wikipedia.org/wiki/Herod_Antipas</a></li>
<li><a href="https://en.wikipedia.org/wiki/Philip_the_Tetrarch">https://en.wikipedia.org/wiki/Philip_the_Tetrarch</a></li>
<li><a href="https://en.wikipedia.org/wiki/Annas">https://en.wikipedia.org/wiki/Annas</a></li>
<li><a href="https://en.wikipedia.org/wiki/Caiaphas">https://en.wikipedia.org/wiki/Caiaphas</a></li>
</ol>

]]></content>
  </entry>
  
</feed>
